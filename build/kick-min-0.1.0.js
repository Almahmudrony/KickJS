/*!
 * New BSD License
 *
 * Copyright (c) 2011, Morten Nobel-Joergensen, Kickstart Games ( http://www.kickstartgames.com/ )
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the
 * following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this list of conditions and the following
 * disclaimer.
 * - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following
 * disclaimer in the documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -----
 * KICK.math is based on
 * glMatrix.js - High performance matrix and vector operations for WebGL
 * http://code.google.com/p/glmatrix/
 * version 0.9.6
 *
 * Copyright (c) 2011 Brandon Jones
 *
 * This software is provided 'as-is', without any express or implied
 * warranty. In no event will the authors be held liable for any damages
 * arising from the use of this software.
 *
 * Permission is granted to anyone to use this software for any purpose,
 * including commercial applications, and to alter it and redistribute it
 * freely, subject to the following restrictions:
 *
 *    1. The origin of this software must not be misrepresented; you must not
 *    claim that you wrote the original software. If you use this software
 *    in a product, an acknowledgment in the product documentation would be
 *    appreciated but is not required.
 *
 *    2. Altered source versions must be plainly marked as such, and must not
 *    be misrepresented as being the original software.
 *
 *    3. This notice may not be removed or altered from any source
 *    distribution.
 */
 'use strict';var KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,f;e[0]==="KICK"&&(e=e.slice(1));for(f=0;f<e.length;f+=1)typeof h[e[f]]==="undefined"&&(h[e[f]]={}),h=h[e[f]];return h};
(function(){var e=KICK.namespace("KICK.core");e.Constants={};Object.defineProperties(e.Constants,{_ASSERT:{value:!0,enumerable:!0},_DEBUG:{value:!0,enumerable:!0},_DEGREE_TO_RADIAN:{value:0.01745329251994,enumerable:!0},_RADIAN_TO_DEGREE:{value:57.2957795130824,enumerable:!0},_EPSILON:{value:1.0E-5,enumerable:!0},_LIGHT_TYPE_AMBIENT:{value:1,enumerable:!0},_LIGHT_TYPE_DIRECTIONAL:{value:2,enumerable:!0},_LIGHT_TYPE_POINT:{value:3,enumerable:!0},GL_DEPTH_BUFFER_BIT:{value:256,enumerable:!0},GL_STENCIL_BUFFER_BIT:{value:1024,
enumerable:!0},GL_COLOR_BUFFER_BIT:{value:16384,enumerable:!0},GL_POINTS:{value:0,enumerable:!0},GL_LINES:{value:1,enumerable:!0},GL_LINE_LOOP:{value:2,enumerable:!0},GL_LINE_STRIP:{value:3,enumerable:!0},GL_TRIANGLES:{value:4,enumerable:!0},GL_TRIANGLE_STRIP:{value:5,enumerable:!0},GL_TRIANGLE_FAN:{value:6,enumerable:!0},GL_ZERO:{value:0,enumerable:!0},GL_ONE:{value:1,enumerable:!0},GL_SRC_COLOR:{value:768,enumerable:!0},GL_ONE_MINUS_SRC_COLOR:{value:769,enumerable:!0},GL_SRC_ALPHA:{value:770,enumerable:!0},
GL_ONE_MINUS_SRC_ALPHA:{value:771,enumerable:!0},GL_DST_ALPHA:{value:772,enumerable:!0},GL_ONE_MINUS_DST_ALPHA:{value:773,enumerable:!0},GL_DST_COLOR:{value:774,enumerable:!0},GL_ONE_MINUS_DST_COLOR:{value:775,enumerable:!0},GL_SRC_ALPHA_SATURATE:{value:776,enumerable:!0},GL_FUNC_ADD:{value:32774,enumerable:!0},GL_BLEND_EQUATION:{value:32777,enumerable:!0},GL_BLEND_EQUATION_RGB:{value:32777,enumerable:!0},GL_BLEND_EQUATION_ALPHA:{value:34877,enumerable:!0},GL_FUNC_SUBTRACT:{value:32778,enumerable:!0},
GL_FUNC_REVERSE_SUBTRACT:{value:32779,enumerable:!0},GL_BLEND_DST_RGB:{value:32968,enumerable:!0},GL_BLEND_SRC_RGB:{value:32969,enumerable:!0},GL_BLEND_DST_ALPHA:{value:32970,enumerable:!0},GL_BLEND_SRC_ALPHA:{value:32971,enumerable:!0},GL_CONSTANT_COLOR:{value:32769,enumerable:!0},GL_ONE_MINUS_CONSTANT_COLOR:{value:32770,enumerable:!0},GL_CONSTANT_ALPHA:{value:32771,enumerable:!0},GL_ONE_MINUS_CONSTANT_ALPHA:{value:32772,enumerable:!0},GL_BLEND_COLOR:{value:32773,enumerable:!0},GL_ARRAY_BUFFER:{value:34962,
enumerable:!0},GL_ELEMENT_ARRAY_BUFFER:{value:34963,enumerable:!0},GL_ARRAY_BUFFER_BINDING:{value:34964,enumerable:!0},GL_ELEMENT_ARRAY_BUFFER_BINDING:{value:34965,enumerable:!0},GL_STREAM_DRAW:{value:35040,enumerable:!0},GL_STATIC_DRAW:{value:35044,enumerable:!0},GL_DYNAMIC_DRAW:{value:35048,enumerable:!0},GL_BUFFER_SIZE:{value:34660,enumerable:!0},GL_BUFFER_USAGE:{value:34661,enumerable:!0},GL_CURRENT_VERTEX_ATTRIB:{value:34342,enumerable:!0},GL_FRONT:{value:1028,enumerable:!0},GL_BACK:{value:1029,
enumerable:!0},GL_FRONT_AND_BACK:{value:1032,enumerable:!0},GL_TEXTURE_2D:{value:3553,enumerable:!0},GL_CULL_FACE:{value:2884,enumerable:!0},GL_BLEND:{value:3042,enumerable:!0},GL_DITHER:{value:3024,enumerable:!0},GL_STENCIL_TEST:{value:2960,enumerable:!0},GL_DEPTH_TEST:{value:2929,enumerable:!0},GL_SCISSOR_TEST:{value:3089,enumerable:!0},GL_POLYGON_OFFSET_FILL:{value:32823,enumerable:!0},GL_SAMPLE_ALPHA_TO_COVERAGE:{value:32926,enumerable:!0},GL_SAMPLE_COVERAGE:{value:32928,enumerable:!0},GL_NO_ERROR:{value:0,
enumerable:!0},GL_INVALID_ENUM:{value:1280,enumerable:!0},GL_INVALID_VALUE:{value:1281,enumerable:!0},GL_INVALID_OPERATION:{value:1282,enumerable:!0},GL_OUT_OF_MEMORY:{value:1285,enumerable:!0},GL_CW:{value:2304,enumerable:!0},GL_CCW:{value:2305,enumerable:!0},GL_LINE_WIDTH:{value:2849,enumerable:!0},GL_ALIASED_POINT_SIZE_RANGE:{value:33901,enumerable:!0},GL_ALIASED_LINE_WIDTH_RANGE:{value:33902,enumerable:!0},GL_CULL_FACE_MODE:{value:2885,enumerable:!0},GL_FRONT_FACE:{value:2886,enumerable:!0},GL_DEPTH_RANGE:{value:2928,
enumerable:!0},GL_DEPTH_WRITEMASK:{value:2930,enumerable:!0},GL_DEPTH_CLEAR_VALUE:{value:2931,enumerable:!0},GL_DEPTH_FUNC:{value:2932,enumerable:!0},GL_STENCIL_CLEAR_VALUE:{value:2961,enumerable:!0},GL_STENCIL_FUNC:{value:2962,enumerable:!0},GL_STENCIL_FAIL:{value:2964,enumerable:!0},GL_STENCIL_PASS_DEPTH_FAIL:{value:2965,enumerable:!0},GL_STENCIL_PASS_DEPTH_PASS:{value:2966,enumerable:!0},GL_STENCIL_REF:{value:2967,enumerable:!0},GL_STENCIL_VALUE_MASK:{value:2963,enumerable:!0},GL_STENCIL_WRITEMASK:{value:2968,
enumerable:!0},GL_STENCIL_BACK_FUNC:{value:34816,enumerable:!0},GL_STENCIL_BACK_FAIL:{value:34817,enumerable:!0},GL_STENCIL_BACK_PASS_DEPTH_FAIL:{value:34818,enumerable:!0},GL_STENCIL_BACK_PASS_DEPTH_PASS:{value:34819,enumerable:!0},GL_STENCIL_BACK_REF:{value:36003,enumerable:!0},GL_STENCIL_BACK_VALUE_MASK:{value:36004,enumerable:!0},GL_STENCIL_BACK_WRITEMASK:{value:36005,enumerable:!0},GL_VIEWPORT:{value:2978,enumerable:!0},GL_SCISSOR_BOX:{value:3088,enumerable:!0},GL_COLOR_CLEAR_VALUE:{value:3106,
enumerable:!0},GL_COLOR_WRITEMASK:{value:3107,enumerable:!0},GL_UNPACK_ALIGNMENT:{value:3317,enumerable:!0},GL_PACK_ALIGNMENT:{value:3333,enumerable:!0},GL_MAX_TEXTURE_SIZE:{value:3379,enumerable:!0},GL_MAX_VIEWPORT_DIMS:{value:3386,enumerable:!0},GL_SUBPIXEL_BITS:{value:3408,enumerable:!0},GL_RED_BITS:{value:3410,enumerable:!0},GL_GREEN_BITS:{value:3411,enumerable:!0},GL_BLUE_BITS:{value:3412,enumerable:!0},GL_ALPHA_BITS:{value:3413,enumerable:!0},GL_DEPTH_BITS:{value:3414,enumerable:!0},GL_STENCIL_BITS:{value:3415,
enumerable:!0},GL_POLYGON_OFFSET_UNITS:{value:10752,enumerable:!0},GL_POLYGON_OFFSET_FACTOR:{value:32824,enumerable:!0},GL_TEXTURE_BINDING_2D:{value:32873,enumerable:!0},GL_SAMPLE_BUFFERS:{value:32936,enumerable:!0},GL_SAMPLES:{value:32937,enumerable:!0},GL_SAMPLE_COVERAGE_VALUE:{value:32938,enumerable:!0},GL_SAMPLE_COVERAGE_INVERT:{value:32939,enumerable:!0},GL_NUM_COMPRESSED_TEXTURE_FORMATS:{value:34466,enumerable:!0},GL_COMPRESSED_TEXTURE_FORMATS:{value:34467,enumerable:!0},GL_DONT_CARE:{value:4352,
enumerable:!0},GL_FASTEST:{value:4353,enumerable:!0},GL_NICEST:{value:4354,enumerable:!0},GL_GENERATE_MIPMAP_HINT:{value:33170,enumerable:!0},GL_BYTE:{value:5120,enumerable:!0},GL_UNSIGNED_BYTE:{value:5121,enumerable:!0},GL_SHORT:{value:5122,enumerable:!0},GL_UNSIGNED_SHORT:{value:5123,enumerable:!0},GL_INT:{value:5124,enumerable:!0},GL_UNSIGNED_INT:{value:5125,enumerable:!0},GL_FLOAT:{value:5126,enumerable:!0},GL_DEPTH_COMPONENT:{value:6402,enumerable:!0},GL_ALPHA:{value:6406,enumerable:!0},GL_RGB:{value:6407,
enumerable:!0},GL_RGBA:{value:6408,enumerable:!0},GL_LUMINANCE:{value:6409,enumerable:!0},GL_LUMINANCE_ALPHA:{value:6410,enumerable:!0},GL_UNSIGNED_SHORT_4_4_4_4:{value:32819,enumerable:!0},GL_UNSIGNED_SHORT_5_5_5_1:{value:32820,enumerable:!0},GL_UNSIGNED_SHORT_5_6_5:{value:33635,enumerable:!0},GL_FRAGMENT_SHADER:{value:35632,enumerable:!0},GL_VERTEX_SHADER:{value:35633,enumerable:!0},GL_MAX_VERTEX_ATTRIBS:{value:34921,enumerable:!0},GL_MAX_VERTEX_UNIFORM_VECTORS:{value:36347,enumerable:!0},GL_MAX_VARYING_VECTORS:{value:36348,
enumerable:!0},GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS:{value:35661,enumerable:!0},GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS:{value:35660,enumerable:!0},GL_MAX_TEXTURE_IMAGE_UNITS:{value:34930,enumerable:!0},GL_MAX_FRAGMENT_UNIFORM_VECTORS:{value:36349,enumerable:!0},GL_SHADER_TYPE:{value:35663,enumerable:!0},GL_DELETE_STATUS:{value:35712,enumerable:!0},GL_LINK_STATUS:{value:35714,enumerable:!0},GL_VALIDATE_STATUS:{value:35715,enumerable:!0},GL_ATTACHED_SHADERS:{value:35717,enumerable:!0},GL_ACTIVE_UNIFORMS:{value:35718,
enumerable:!0},GL_ACTIVE_ATTRIBUTES:{value:35721,enumerable:!0},GL_SHADING_LANGUAGE_VERSION:{value:35724,enumerable:!0},GL_CURRENT_PROGRAM:{value:35725,enumerable:!0},GL_NEVER:{value:512,enumerable:!0},GL_LESS:{value:513,enumerable:!0},GL_EQUAL:{value:514,enumerable:!0},GL_LEQUAL:{value:515,enumerable:!0},GL_GREATER:{value:516,enumerable:!0},GL_NOTEQUAL:{value:517,enumerable:!0},GL_GEQUAL:{value:518,enumerable:!0},GL_ALWAYS:{value:519,enumerable:!0},GL_KEEP:{value:7680,enumerable:!0},GL_REPLACE:{value:7681,
enumerable:!0},GL_INCR:{value:7682,enumerable:!0},GL_DECR:{value:7683,enumerable:!0},GL_INVERT:{value:5386,enumerable:!0},GL_INCR_WRAP:{value:34055,enumerable:!0},GL_DECR_WRAP:{value:34056,enumerable:!0},GL_VENDOR:{value:7936,enumerable:!0},GL_RENDERER:{value:7937,enumerable:!0},GL_VERSION:{value:7938,enumerable:!0},GL_NEAREST:{value:9728,enumerable:!0},GL_LINEAR:{value:9729,enumerable:!0},GL_NEAREST_MIPMAP_NEAREST:{value:9984,enumerable:!0},GL_LINEAR_MIPMAP_NEAREST:{value:9985,enumerable:!0},GL_NEAREST_MIPMAP_LINEAR:{value:9986,
enumerable:!0},GL_LINEAR_MIPMAP_LINEAR:{value:9987,enumerable:!0},GL_TEXTURE_MAG_FILTER:{value:10240,enumerable:!0},GL_TEXTURE_MIN_FILTER:{value:10241,enumerable:!0},GL_TEXTURE_WRAP_S:{value:10242,enumerable:!0},GL_TEXTURE_WRAP_T:{value:10243,enumerable:!0},GL_TEXTURE:{value:5890,enumerable:!0},GL_TEXTURE_CUBE_MAP:{value:34067,enumerable:!0},GL_TEXTURE_BINDING_CUBE_MAP:{value:34068,enumerable:!0},GL_TEXTURE_CUBE_MAP_POSITIVE_X:{value:34069,enumerable:!0},GL_TEXTURE_CUBE_MAP_NEGATIVE_X:{value:34070,
enumerable:!0},GL_TEXTURE_CUBE_MAP_POSITIVE_Y:{value:34071,enumerable:!0},GL_TEXTURE_CUBE_MAP_NEGATIVE_Y:{value:34072,enumerable:!0},GL_TEXTURE_CUBE_MAP_POSITIVE_Z:{value:34073,enumerable:!0},GL_TEXTURE_CUBE_MAP_NEGATIVE_Z:{value:34074,enumerable:!0},GL_MAX_CUBE_MAP_TEXTURE_SIZE:{value:34076,enumerable:!0},GL_TEXTURE0:{value:33984,enumerable:!0},GL_TEXTURE1:{value:33985,enumerable:!0},GL_TEXTURE2:{value:33986,enumerable:!0},GL_TEXTURE3:{value:33987,enumerable:!0},GL_TEXTURE4:{value:33988,enumerable:!0},
GL_TEXTURE5:{value:33989,enumerable:!0},GL_TEXTURE6:{value:33990,enumerable:!0},GL_TEXTURE7:{value:33991,enumerable:!0},GL_TEXTURE8:{value:33992,enumerable:!0},GL_TEXTURE9:{value:33993,enumerable:!0},GL_TEXTURE10:{value:33994,enumerable:!0},GL_TEXTURE11:{value:33995,enumerable:!0},GL_TEXTURE12:{value:33996,enumerable:!0},GL_TEXTURE13:{value:33997,enumerable:!0},GL_TEXTURE14:{value:33998,enumerable:!0},GL_TEXTURE15:{value:33999,enumerable:!0},GL_TEXTURE16:{value:34E3,enumerable:!0},GL_TEXTURE17:{value:34001,
enumerable:!0},GL_TEXTURE18:{value:34002,enumerable:!0},GL_TEXTURE19:{value:34003,enumerable:!0},GL_TEXTURE20:{value:34004,enumerable:!0},GL_TEXTURE21:{value:34005,enumerable:!0},GL_TEXTURE22:{value:34006,enumerable:!0},GL_TEXTURE23:{value:34007,enumerable:!0},GL_TEXTURE24:{value:34008,enumerable:!0},GL_TEXTURE25:{value:34009,enumerable:!0},GL_TEXTURE26:{value:34010,enumerable:!0},GL_TEXTURE27:{value:34011,enumerable:!0},GL_TEXTURE28:{value:34012,enumerable:!0},GL_TEXTURE29:{value:34013,enumerable:!0},
GL_TEXTURE30:{value:34014,enumerable:!0},GL_TEXTURE31:{value:34015,enumerable:!0},GL_ACTIVE_TEXTURE:{value:34016,enumerable:!0},GL_REPEAT:{value:10497,enumerable:!0},GL_CLAMP_TO_EDGE:{value:33071,enumerable:!0},GL_MIRRORED_REPEAT:{value:33648,enumerable:!0},GL_FLOAT_VEC2:{value:35664,enumerable:!0},GL_FLOAT_VEC3:{value:35665,enumerable:!0},GL_FLOAT_VEC4:{value:35666,enumerable:!0},GL_INT_VEC2:{value:35667,enumerable:!0},GL_INT_VEC3:{value:35668,enumerable:!0},GL_INT_VEC4:{value:35669,enumerable:!0},
GL_BOOL:{value:35670,enumerable:!0},GL_BOOL_VEC2:{value:35671,enumerable:!0},GL_BOOL_VEC3:{value:35672,enumerable:!0},GL_BOOL_VEC4:{value:35673,enumerable:!0},GL_FLOAT_MAT2:{value:35674,enumerable:!0},GL_FLOAT_MAT3:{value:35675,enumerable:!0},GL_FLOAT_MAT4:{value:35676,enumerable:!0},GL_SAMPLER_2D:{value:35678,enumerable:!0},GL_SAMPLER_CUBE:{value:35680,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_ENABLED:{value:34338,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_SIZE:{value:34339,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_STRIDE:{value:34340,
enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_TYPE:{value:34341,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_NORMALIZED:{value:34922,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_POINTER:{value:34373,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:{value:34975,enumerable:!0},GL_COMPILE_STATUS:{value:35713,enumerable:!0},GL_SHADER_COMPILER:{value:36346,enumerable:!0},GL_LOW_FLOAT:{value:36336,enumerable:!0},GL_MEDIUM_FLOAT:{value:36337,enumerable:!0},GL_HIGH_FLOAT:{value:36338,enumerable:!0},GL_LOW_INT:{value:36339,
enumerable:!0},GL_MEDIUM_INT:{value:36340,enumerable:!0},GL_HIGH_INT:{value:36341,enumerable:!0},GL_FRAMEBUFFER:{value:36160,enumerable:!0},GL_RENDERBUFFER:{value:36161,enumerable:!0},GL_RGBA4:{value:32854,enumerable:!0},GL_RGB5_A1:{value:32855,enumerable:!0},GL_RGB565:{value:36194,enumerable:!0},GL_DEPTH_COMPONENT16:{value:33189,enumerable:!0},GL_STENCIL_INDEX:{value:6401,enumerable:!0},GL_STENCIL_INDEX8:{value:36168,enumerable:!0},GL_DEPTH_STENCIL:{value:34041,enumerable:!0},GL_RENDERBUFFER_WIDTH:{value:36162,
enumerable:!0},GL_RENDERBUFFER_HEIGHT:{value:36163,enumerable:!0},GL_RENDERBUFFER_INTERNAL_FORMAT:{value:36164,enumerable:!0},GL_RENDERBUFFER_RED_SIZE:{value:36176,enumerable:!0},GL_RENDERBUFFER_GREEN_SIZE:{value:36177,enumerable:!0},GL_RENDERBUFFER_BLUE_SIZE:{value:36178,enumerable:!0},GL_RENDERBUFFER_ALPHA_SIZE:{value:36179,enumerable:!0},GL_RENDERBUFFER_DEPTH_SIZE:{value:36180,enumerable:!0},GL_RENDERBUFFER_STENCIL_SIZE:{value:36181,enumerable:!0},GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:{value:36048,
enumerable:!0},GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:{value:36049,enumerable:!0},GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:{value:36050,enumerable:!0},GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:{value:36051,enumerable:!0},GL_COLOR_ATTACHMENT0:{value:36064,enumerable:!0},GL_DEPTH_ATTACHMENT:{value:36096,enumerable:!0},GL_STENCIL_ATTACHMENT:{value:36128,enumerable:!0},GL_DEPTH_STENCIL_ATTACHMENT:{value:33306,enumerable:!0},GL_NONE:{value:0,enumerable:!0},GL_FRAMEBUFFER_COMPLETE:{value:36053,enumerable:!0},
GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT:{value:36054,enumerable:!0},GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:{value:36055,enumerable:!0},GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS:{value:36057,enumerable:!0},GL_FRAMEBUFFER_UNSUPPORTED:{value:36061,enumerable:!0},GL_FRAMEBUFFER_BINDING:{value:36006,enumerable:!0},GL_RENDERBUFFER_BINDING:{value:36007,enumerable:!0},GL_MAX_RENDERBUFFER_SIZE:{value:34024,enumerable:!0},GL_INVALID_FRAMEBUFFER_OPERATION:{value:1286,enumerable:!0},GL_UNPACK_FLIP_Y_WEBGL:{value:37440,
enumerable:!0},GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL:{value:37441,enumerable:!0},GL_CONTEXT_LOST_WEBGL:{value:37442,enumerable:!0},GL_UNPACK_COLORSPACE_CONVERSION_WEBGL:{value:37443,enumerable:!0},GL_BROWSER_DEFAULT_WEBGL:{value:37444,enumerable:!0}})})();this.exports=this.exports||{};exports.Constants=KICK.core.Constants;KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,f;e[0]==="KICK"&&(e=e.slice(1));for(f=0;f<e.length;f+=1)typeof h[e[f]]==="undefined"&&(h[e[f]]={}),h=h[e[f]];return h};
(function(){KICK.namespace("KICK.material").GLSLConstants={"default_fs.glsl":"#ifdef GL_ES\nprecision highp float;\n#endif\nvoid main(void)\n{\n    gl_FragColor = vec4(1.0,0.5, 0.9, 1.0);\n}","default_vs.glsl":"attribute vec3 vertex;\nuniform mat4 _mvProj;\nvoid main(void) {\n  gl_Position = _mvProj * vec4(vertex, 1.0);\n}  ","light.glsl":"struct DirectionalLight {\n   vec3 lDir;\n   vec3 colInt;\n   vec3 halfV;\n};\n// assumes that normal is normalized\nvoid getDirectionalLight(vec3 normal, DirectionalLight dLight, float specularExponent, out vec3 diffuse, out float specular){\n    float diffuseContribution = max(dot(normal, dLight.lDir), 0.0);\n\tfloat specularContribution = max(dot(normal, dLight.halfV), 0.0);\n    specular =  pow(specularContribution, specularExponent);\n\tdiffuse = (dLight.colInt * diffuseContribution);\n}\nuniform DirectionalLight _dLight;\nuniform vec3 _ambient;"}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,f;e[0]==="KICK"&&(e=e.slice(1));for(f=0;f<e.length;f+=1)typeof h[e[f]]==="undefined"&&(h[e[f]]={}),h=h[e[f]];return h};
(function(){var e=KICK.namespace("KICK.math"),h=KICK.namespace("KICK.math.vec2"),f=KICK.namespace("KICK.math.vec3"),m=KICK.namespace("KICK.math.vec4"),p=KICK.namespace("KICK.math.mat3"),g=KICK.namespace("KICK.math.mat4"),c=KICK.namespace("KICK.math.quat4"),n=function(a,b){var d,j=0,c=a.length/b,k=Array(c);for(d=0;d<c;d++,j+=b)k[d]=a.subarray(j,j+b);return k};e.vec2=h;h.wrapArray=function(a){return n(a,2)};h.array=function(a,b){var d=new Float32Array(a*2);if(b)b.mem=d;return h.wrapArray(d)};h.create=
function(a){var b=new Float32Array(2);a&&(b[0]=a[0],b[1]=a[1]);return b};h.set=function(a,b){b[0]=a[0];b[1]=a[1];return b};h.add=function(a,b,d){if(!d||a==d)return a[0]+=b[0],a[1]+=b[1],a;d[0]=a[0]+b[0];d[1]=a[1]+b[1];return d};h.subtract=function(a,b,d){if(!d||a==d)return a[0]-=b[0],a[1]-=b[1],a;d[0]=a[0]-b[0];d[1]=a[1]-b[1];return d};h.normalize=function(a,b){b||(b=a);var d=a[0],j=a[1],c=Math.sqrt(d*d+j*j);if(c){if(c==1)return b[0]=d,b[1]=j,b}else return b[0]=0,b[1]=0,b;c=1/c;b[0]=d*c;b[1]=j*c;
return b};e.vec3=f;f.wrapArray=function(a){return n(a,3)};f.array=function(a,b){var d=new Float32Array(a*3);if(b)b.mem=d;return f.wrapArray(d)};f.create=function(a){var b=new Float32Array(3);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]);return b};f.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};f.add=function(a,b,d){if(!d||a==d)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;d[0]=a[0]+b[0];d[1]=a[1]+b[1];d[2]=a[2]+b[2];return d};f.subtract=function(a,b,d){if(!d||a==d)return a[0]-=b[0],a[1]-=b[1],a[2]-=
b[2],a;d[0]=a[0]-b[0];d[1]=a[1]-b[1];d[2]=a[2]-b[2];return d};f.multiply=function(a,b,d){if(!d||a==d)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;d[0]=a[0]*b[0];d[1]=a[1]*b[1];d[2]=a[2]*b[2];return d};f.negate=function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};f.scale=function(a,b,d){if(!d||a==d)return a[0]*=b,a[1]*=b,a[2]*=b,a;d[0]=a[0]*b;d[1]=a[1]*b;d[2]=a[2]*b;return d};f.normalize=function(a,b){b||(b=a);var d=a[0],j=a[1],c=a[2],k=Math.sqrt(d*d+j*j+c*c);if(k){if(k==1)return b[0]=d,
b[1]=j,b[2]=c,b}else return b[0]=0,b[1]=0,b[2]=0,b;k=1/k;b[0]=d*k;b[1]=j*k;b[2]=c*k;return b};f.cross=function(a,b,d){d||(d=a);var j=a[0],c=a[1],a=a[2],k=b[0],i=b[1],b=b[2];d[0]=c*b-a*i;d[1]=a*k-j*b;d[2]=j*i-c*k;return d};f.length=function(a){var b=a[0],d=a[1],a=a[2];return Math.sqrt(b*b+d*d+a*a)};f.lengthSqr=function(a){var b=a[0],d=a[1],a=a[2];return b*b+d*d+a*a};f.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};f.direction=function(a,b,d){d||(d=a);var j=a[0]-b[0],c=a[1]-b[1],a=a[2]-b[2],
b=Math.sqrt(j*j+c*c+a*a);if(!b)return d[0]=0,d[1]=0,d[2]=0,d;b=1/b;d[0]=j*b;d[1]=c*b;d[2]=a*b;return d};f.lerp=function(a,b,d,j){j||(j=a);j[0]=a[0]+d*(b[0]-a[0]);j[1]=a[1]+d*(b[1]-a[1]);j[2]=a[2]+d*(b[2]-a[2]);return j};f.sphericalToCarterian=function(a,b){var d=a[0],j=-a[1],c=a[2],k=d*Math.cos(c);b||(b=f.create());b[0]=k*Math.cos(j);b[1]=d*Math.sin(c);b[2]=k*Math.sin(j);return b};f.cartesianToSpherical=function(a,b){var d=a[0],j=a[1],c=a[2],k;d==0&&(d=1.0E-5);b||(b=f.create());b[0]=k=Math.sqrt(d*
d+j*j+c*c);b[1]=-Math.atan(c/d);d<0&&(b[1]+=Math.PI);b[2]=Math.asin(j/k);return b};f.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};e.vec4=m;m.wrapArray=function(a){return n(a,4)};m.array=function(a,b){var d=new Float32Array(a*4);if(b)b.mem=d;return m.wrapArray(d)};m.create=function(a){var b=new Float32Array(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b};m.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};m.add=function(a,b,d){if(!d||a==d)return a[0]+=b[0],a[1]+=
b[1],a[2]+=b[2],a[3]+=b[3],a;d[0]=a[0]+b[0];d[1]=a[1]+b[1];d[2]=a[2]+b[2];d[3]=a[3]+b[3];return d};m.subtract=function(a,b,d){if(!d||a==d)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a[3]-=b[3],a;d[0]=a[0]-b[0];d[1]=a[1]-b[1];d[2]=a[2]-b[2];d[3]=a[3]-b[3];return d};m.multiply=function(a,b,d){if(!d||a==d)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a[3]*=b[3],a;d[0]=a[0]*b[0];d[1]=a[1]*b[1];d[2]=a[2]*b[2];d[3]=a[3]*b[3];return d};m.negate=function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};
m.scale=function(a,b,d){if(!d||a==d)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;d[0]=a[0]*b;d[1]=a[1]*b;d[2]=a[2]*b;d[3]=a[2]*b;return d};m.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};e.mat3=p;p.create=function(a){var b=new Float32Array(9);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]);return b};p.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};p.identity=function(a){a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};p.transpose=function(a,b){if(!b||a==b){var d=a[1],j=a[2],c=a[5];a[1]=a[3];a[2]=a[6];a[3]=d;a[5]=a[7];a[6]=j;a[7]=c;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b};p.toMat4=function(a,b){b||(b=g.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=0;b[4]=a[3];b[5]=a[4];b[6]=a[5];b[7]=0;b[8]=a[6];b[9]=a[7];b[10]=a[8];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};p.str=function(a){return"["+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"};p.strPretty=function(a){return"["+a[0]+", "+a[3]+", "+a[6]+"\n, "+a[1]+", "+a[4]+", "+a[7]+"\n, "+a[2]+", "+a[5]+", "+a[8]+"]"};e.mat4=g;g.create=function(a){var b=new Float32Array(16);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};g.set=function(a,b){b[0]=a[0];b[1]=a[1];
b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};g.setTRS=function(a,b,d,j){j||(j=g.create());g.identity(j);g.translate(j,a);g.multiply(j,c.toMat4(b));g.scale(j,d);return j};g.setTRSInverse=function(a,b,d,j){j||(j=g.create());g.identity(j);g.scale(j,[1/d[0],1/d[1],1/d[2]]);g.multiply(j,c.toMat4(c.inverse(b)));g.translate(j,[-a[0],-a[1],-a[2]]);return j};g.identity=function(a){a[0]=1;a[1]=
0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};g.transpose=function(a,b){if(!b||a==b){var d=a[1],j=a[2],c=a[3],k=a[6],i=a[7],g=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=d;a[6]=a[9];a[7]=a[13];a[8]=j;a[9]=k;a[11]=a[14];a[12]=c;a[13]=i;a[14]=g;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b};
g.determinant=function(a){var b=a[0],d=a[1],j=a[2],c=a[3],k=a[4],i=a[5],g=a[6],l=a[7],t=a[8],e=a[9],o=a[10],f=a[11],h=a[12],q=a[13],n=a[14],a=a[15];return h*e*g*c-t*q*g*c-h*i*o*c+k*q*o*c+t*i*n*c-k*e*n*c-h*e*j*l+t*q*j*l+h*d*o*l-b*q*o*l-t*d*n*l+b*e*n*l+h*i*j*f-k*q*j*f-h*d*g*f+b*q*g*f+k*d*n*f-b*i*n*f-t*i*j*a+k*e*j*a+t*d*g*a-b*e*g*a-k*d*o*a+b*i*o*a};g.inverse=function(a,b){b||(b=a);var d=a[0],j=a[1],c=a[2],k=a[3],i=a[4],g=a[5],l=a[6],t=a[7],e=a[8],o=a[9],f=a[10],h=a[11],q=a[12],n=a[13],m=a[14],p=a[15],
y=d*g-j*i,D=d*l-c*i,A=d*t-k*i,B=j*l-c*g,z=j*t-k*g,C=c*t-k*l,H=e*n-o*q,I=e*m-f*q,J=e*p-h*q,K=o*m-f*n,L=o*p-h*n,M=f*p-h*m,F=1/(y*M-D*L+A*K+B*J-z*I+C*H);b[0]=(g*M-l*L+t*K)*F;b[1]=(-j*M+c*L-k*K)*F;b[2]=(n*C-m*z+p*B)*F;b[3]=(-o*C+f*z-h*B)*F;b[4]=(-i*M+l*J-t*I)*F;b[5]=(d*M-c*J+k*I)*F;b[6]=(-q*C+m*A-p*D)*F;b[7]=(e*C-f*A+h*D)*F;b[8]=(i*L-g*J+t*H)*F;b[9]=(-d*L+j*J-k*H)*F;b[10]=(q*z-n*A+p*y)*F;b[11]=(-e*z+o*A-h*y)*F;b[12]=(-i*K+g*I-l*H)*F;b[13]=(d*K-j*I+c*H)*F;b[14]=(-q*B+n*D-m*y)*F;b[15]=(e*B-o*D+f*y)*F;return b};
g.toRotationMat=function(a,b){b||(b=g.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};g.toMat3=function(a,b){b||(b=p.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};g.toNormalMat3=function(a,b){var d=a[0],j=a[1],c=a[2],k=a[4],i=a[5],g=a[6],l=a[8],e=a[9],f=a[10],o=f*i-g*e,h=-f*k+g*l,n=e*k-i*l,q=d*o+j*h+c*n;if(!q)return null;
q=1/q;b||(b=p.create());b[0]=o*q;b[3]=(-f*j+c*e)*q;b[6]=(g*j-c*i)*q;b[1]=h*q;b[4]=(f*d-c*l)*q;b[7]=(-g*d+c*k)*q;b[2]=n*q;b[5]=(-e*d+j*l)*q;b[8]=(i*d-j*k)*q;return b};g.toInverseMat3=function(a,b){var d=a[0],j=a[1],c=a[2],k=a[4],i=a[5],g=a[6],l=a[8],e=a[9],f=a[10],o=f*i-g*e,h=-f*k+g*l,n=e*k-i*l,q=d*o+j*h+c*n;if(!q)return null;q=1/q;b||(b=p.create());b[0]=o*q;b[1]=(-f*j+c*e)*q;b[2]=(g*j-c*i)*q;b[3]=h*q;b[4]=(f*d-c*l)*q;b[5]=(-g*d+c*k)*q;b[6]=n*q;b[7]=(-e*d+j*l)*q;b[8]=(i*d-j*k)*q;return b};g.multiply=
function(a,b,d){d||(d=a);var j=a[0],c=a[1],g=a[2],i=a[3],e=a[4],l=a[5],f=a[6],h=a[7],o=a[8],n=a[9],m=a[10],q=a[11],p=a[12],E=a[13],x=a[14],a=a[15],y=b[0],D=b[1],A=b[2],B=b[3],z=b[4],C=b[5],H=b[6],I=b[7],J=b[8],K=b[9],L=b[10],M=b[11],F=b[12],N=b[13],O=b[14],b=b[15];d[0]=y*j+D*e+A*o+B*p;d[1]=y*c+D*l+A*n+B*E;d[2]=y*g+D*f+A*m+B*x;d[3]=y*i+D*h+A*q+B*a;d[4]=z*j+C*e+H*o+I*p;d[5]=z*c+C*l+H*n+I*E;d[6]=z*g+C*f+H*m+I*x;d[7]=z*i+C*h+H*q+I*a;d[8]=J*j+K*e+L*o+M*p;d[9]=J*c+K*l+L*n+M*E;d[10]=J*g+K*f+L*m+M*x;d[11]=
J*i+K*h+L*q+M*a;d[12]=F*j+N*e+O*o+b*p;d[13]=F*c+N*l+O*n+b*E;d[14]=F*g+N*f+O*m+b*x;d[15]=F*i+N*h+O*q+b*a;return d};g.multiplyVec3=function(a,b,d){d||(d=b);var j=b[0],c=b[1],b=b[2];d[0]=a[0]*j+a[4]*c+a[8]*b+a[12];d[1]=a[1]*j+a[5]*c+a[9]*b+a[13];d[2]=a[2]*j+a[6]*c+a[10]*b+a[14];return d};g.multiplyVec4=function(a,b,d){d||(d=b);var j=b[0],c=b[1],g=b[2],b=b[3];d[0]=a[0]*j+a[4]*c+a[8]*g+a[12]*b;d[1]=a[1]*j+a[5]*c+a[9]*g+a[13]*b;d[2]=a[2]*j+a[6]*c+a[10]*g+a[14]*b;d[3]=a[3]*j+a[7]*c+a[11]*g+a[15]*b;return d};
g.translate=function(a,b,d){var j=b[0],c=b[1],b=b[2];if(!d||a==d)return a[12]=a[0]*j+a[4]*c+a[8]*b+a[12],a[13]=a[1]*j+a[5]*c+a[9]*b+a[13],a[14]=a[2]*j+a[6]*c+a[10]*b+a[14],a[15]=a[3]*j+a[7]*c+a[11]*b+a[15],a;var g=a[0],i=a[1],e=a[2],l=a[3],f=a[4],h=a[5],o=a[6],n=a[7],m=a[8],q=a[9],p=a[10],E=a[11];d[0]=g;d[1]=i;d[2]=e;d[3]=l;d[4]=f;d[5]=h;d[6]=o;d[7]=n;d[8]=m;d[9]=q;d[10]=p;d[11]=E;d[12]=g*j+f*c+m*b+a[12];d[13]=i*j+h*c+q*b+a[13];d[14]=e*j+o*c+p*b+a[14];d[15]=l*j+n*c+E*b+a[15];return d};g.scale=function(a,
b,d){var c=b[0],g=b[1],b=b[2];if(!d||a==d)return a[0]*=c,a[1]*=c,a[2]*=c,a[3]*=c,a[4]*=g,a[5]*=g,a[6]*=g,a[7]*=g,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;d[0]=a[0]*c;d[1]=a[1]*c;d[2]=a[2]*c;d[3]=a[3]*c;d[4]=a[4]*g;d[5]=a[5]*g;d[6]=a[6]*g;d[7]=a[7]*g;d[8]=a[8]*b;d[9]=a[9]*b;d[10]=a[10]*b;d[11]=a[11]*b;d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d};g.rotateEuler=function(a,b,d){d&&(g.set(a,d),a=d);b[2]!==0&&g.rotateZ(a,b[2]*0.01745329251994);b[1]!==0&&g.rotateY(a,b[1]*0.01745329251994);b[0]!==
0&&g.rotateX(a,b[0]*0.01745329251994);return a};g.rotate=function(a,b,d,c){var g=d[0],k=d[1],d=d[2],i=Math.sqrt(g*g+k*k+d*d);if(!i)return null;i!=1&&(i=1/i,g*=i,k*=i,d*=i);var e=Math.sin(b),l=Math.cos(b),f=1-l,b=a[0],i=a[1],h=a[2],o=a[3],n=a[4],m=a[5],q=a[6],p=a[7],E=a[8],x=a[9],y=a[10],D=a[11],A=g*g*f+l,B=k*g*f+d*e,z=d*g*f-k*e,C=g*k*f-d*e,H=k*k*f+l,I=d*k*f+g*e,J=g*d*f+k*e,g=k*d*f-g*e,k=d*d*f+l;c?a!=c&&(c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=b*A+n*B+E*z;c[1]=i*A+m*B+x*z;c[2]=h*
A+q*B+y*z;c[3]=o*A+p*B+D*z;c[4]=b*C+n*H+E*I;c[5]=i*C+m*H+x*I;c[6]=h*C+q*H+y*I;c[7]=o*C+p*H+D*I;c[8]=b*J+n*g+E*k;c[9]=i*J+m*g+x*k;c[10]=h*J+q*g+y*k;c[11]=o*J+p*g+D*k;return c};g.rotateX=function(a,b,d){var c=Math.sin(b),b=Math.cos(b),g=a[4],e=a[5],i=a[6],f=a[7],l=a[8],h=a[9],n=a[10],o=a[11];d?a!=d&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[4]=g*b+l*c;d[5]=e*b+h*c;d[6]=i*b+n*c;d[7]=f*b+o*c;d[8]=g*-c+l*b;d[9]=e*-c+h*b;d[10]=i*-c+n*b;d[11]=f*-c+o*
b;return d};g.rotateY=function(a,b,d){var c=Math.sin(b),b=Math.cos(b),g=a[0],e=a[1],i=a[2],f=a[3],l=a[8],h=a[9],n=a[10],o=a[11];d?a!=d&&(d[4]=a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=g*b+l*-c;d[1]=e*b+h*-c;d[2]=i*b+n*-c;d[3]=f*b+o*-c;d[8]=g*c+l*b;d[9]=e*c+h*b;d[10]=i*c+n*b;d[11]=f*c+o*b;return d};g.rotateZ=function(a,b,d){var c=Math.sin(b),b=Math.cos(b),g=a[0],e=a[1],i=a[2],f=a[3],l=a[4],h=a[5],n=a[6],o=a[7];d?a!=d&&(d[8]=a[8],d[9]=a[9],d[10]=a[10],
d[11]=a[11],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=g*b+l*c;d[1]=e*b+h*c;d[2]=i*b+n*c;d[3]=f*b+o*c;d[4]=g*-c+l*b;d[5]=e*-c+h*b;d[6]=i*-c+n*b;d[7]=f*-c+o*b;return d};g.frustum=function(a,b,d,c,e,f,i){i||(i=g.create());var h=b-a,l=c-d,n=f-e;i[0]=e*2/h;i[1]=0;i[2]=0;i[3]=0;i[4]=0;i[5]=e*2/l;i[6]=0;i[7]=0;i[8]=(b+a)/h;i[9]=(c+d)/l;i[10]=-(f+e)/n;i[11]=-1;i[12]=0;i[13]=0;i[14]=-(f*e*2)/n;i[15]=0;return i};g.perspective=function(a,b,d,c,e){a=d*Math.tan(a*Math.PI/360);b*=a;return g.frustum(-b,
b,-a,a,d,c,e)};g.ortho=function(a,b,d,c,e,f,i){i||(i=g.create());var h=b-a,l=c-d,n=f-e;i[0]=2/h;i[1]=0;i[2]=0;i[3]=0;i[4]=0;i[5]=2/l;i[6]=0;i[7]=0;i[8]=0;i[9]=0;i[10]=-2/n;i[11]=0;i[12]=-(a+b)/h;i[13]=-(c+d)/l;i[14]=-(f+e)/n;i[15]=1;return i};g.lookAt=function(a,b,d,c){c||(c=g.create());var e=a[0],f=a[1],a=a[2],i=d[0],h=d[1],l=d[2],d=b[1],n=b[2];if(e==b[0]&&f==d&&a==n)return g.identity(c);var m,o,p,u,d=e-b[0],n=f-b[1],b=a-b[2];u=1/Math.sqrt(d*d+n*n+b*b);d*=u;n*=u;b*=u;m=h*b-l*n;l=l*d-i*b;i=i*n-h*
d;(u=Math.sqrt(m*m+l*l+i*i))?(u=1/u,m*=u,l*=u,i*=u):i=l=m=0;h=n*i-b*l;o=b*m-d*i;p=d*l-n*m;(u=Math.sqrt(h*h+o*o+p*p))?(u=1/u,h*=u,o*=u,p*=u):p=o=h=0;c[0]=m;c[1]=h;c[2]=d;c[3]=0;c[4]=l;c[5]=o;c[6]=n;c[7]=0;c[8]=i;c[9]=p;c[10]=b;c[11]=0;c[12]=-(m*e+l*f+i*a);c[13]=-(h*e+o*f+p*a);c[14]=-(d*e+n*f+b*a);c[15]=1;return c};g.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+
"]"};g.strPretty=function(a){return"["+a[0]+", "+a[4]+", "+a[8]+", "+a[12]+"\n, "+a[1]+", "+a[5]+", "+a[9]+", "+a[13]+"\n, "+a[2]+", "+a[6]+", "+a[10]+", "+a[14]+"\n, "+a[3]+", "+a[7]+", "+a[11]+", "+a[15]+"]"};e.quat4=c;c.create=function(a){var b=new Float32Array(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b};c.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};c.calculateW=function(a,b){var d=a[0],c=a[1],g=a[2];if(!b||a==b)return a[3]=-Math.sqrt(Math.abs(1-d*d-c*c-g*
g)),a;b[0]=d;b[1]=c;b[2]=g;b[3]=-Math.sqrt(Math.abs(1-d*d-c*c-g*g));return b};c.inverse=function(a,b){if(!b||a==b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};c.length=function(a){var b=a[0],d=a[1],c=a[2],a=a[3];return Math.sqrt(b*b+d*d+c*c+a*a)};c.normalize=function(a,b){b||(b=a);var d=a[0],c=a[1],g=a[2],e=a[3],i=Math.sqrt(d*d+c*c+g*g+e*e);if(i==0)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;i=1/i;b[0]=d*i;b[1]=c*i;b[2]=g*i;b[3]=e*i;return b};c.multiply=function(a,
b,d){d||(d=a);var c=a[0],g=a[1],e=a[2],a=a[3],i=b[0],f=b[1],h=b[2],b=b[3];d[0]=c*b+a*i+g*h-e*f;d[1]=g*b+a*f+e*i-c*h;d[2]=e*b+a*h+c*f-g*i;d[3]=a*b-c*i-g*f-e*h;return d};c.multiplyVec3=function(a,b,d){d||(d=b);var c=b[0],g=b[1],e=b[2],b=a[0],i=a[1],f=a[2],a=a[3],h=a*c+i*e-f*g,n=a*g+f*c-b*e,m=a*e+b*g-i*c,c=-b*c-i*g-f*e;d[0]=h*a+c*-b+n*-f-m*-i;d[1]=n*a+c*-i+m*-b-h*-f;d[2]=m*a+c*-f+h*-i-n*-b;return d};c.identity=function(a){a||(a=c.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};c.toEuler=function(a,b){var d=
a[0],c=a[1],g=a[2],e=a[3],i=c*c;b||(b=f.create());b[0]=Math.atan2(2*(e*d+c*g),1-2*(d*d+i))*57.2957795130824;b[1]=Math.asin(2*(e*c-g*d))*57.2957795130824;b[2]=Math.atan2(2*(e*g+d*c),1-2*(i+g*g))*57.2957795130824;return b};c.angleAxis=function(a,b,d){a*=0.00872664625997;var g=Math.sin(a);d||(d=c.create());d[3]=Math.cos(a);d[2]=b[2]*g;d[1]=b[1]*g;d[0]=b[0]*g;return d};c.setEuler=function(a,b){var d=c.angleAxis(a[0],[1,0,0]),g=c.angleAxis(a[1],[0,1,0]),e=c.angleAxis(a[2],[0,0,1]);b||(b=c.create());c.multiply(e,
g,b);c.multiply(b,d,b);return b};c.toMat3=function(a,b){b||(b=p.create());var d=a[0],c=a[1],g=a[2],e=a[3],i=2*d,f=2*c,h=2*g,n=f*c,m=h*g;c*=i;h*=e;var o=i*g,w=f*e;d*=i;g*=f;e*=i;b[0]=1-n-m;b[1]=c+h;b[2]=o-w;b[3]=c-h;b[4]=1-d-m;b[5]=g+e;b[6]=o+w;b[7]=g-e;b[8]=1-d-n;return b};c.toMat4=function(a,b){b||(b=g.create());var d=a[0],c=a[1],e=a[2],f=a[3],i=2*d,h=2*c,n=2*e,m=h*c,p=n*e;c*=i;n*=f;var o=i*e,w=h*f;d*=i;e*=h;f*=i;b[0]=1-m-p;b[1]=c+n;b[2]=o-w;b[3]=0;b[4]=c-n;b[5]=1-d-p;b[6]=e+f;b[7]=0;b[8]=o+w;b[9]=
e-f;b[10]=1-d-m;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};c.slerp=function(a,b,d,c){c||(c=a);var g=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(Math.abs(g)>=1)return c!=a&&(c[0]=a[0],c[1]=a[1],c[2]=a[2],c[3]=a[3]),c;var e=Math.acos(g),i=Math.sqrt(1-g*g);if(Math.abs(i)<0.0010)return c[0]=a[0]*0.5+b[0]*0.5,c[1]=a[1]*0.5+b[1]*0.5,c[2]=a[2]*0.5+b[2]*0.5,c[3]=a[3]*0.5+b[3]*0.5,c;g=Math.sin((1-d)*e)/i;d=Math.sin(d*e)/i;c[0]=a[0]*g+b[0]*d;c[1]=a[1]*g+b[1]*d;c[2]=a[2]*g+b[2]*d;c[3]=a[3]*g+b[3]*d;return c};
c.difference=function(a,b,c){c||(c=a);var g=-a[0],e=-a[1],f=-a[2],a=a[3],i=b[0],h=b[1],n=b[2],b=b[3];c[0]=g*b+a*i+e*n-f*h;c[1]=e*b+a*h+f*i-g*n;c[2]=f*b+a*n+g*h-e*i;c[3]=a*b-g*i-e*h-f*n;return c};c.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,f;e[0]==="KICK"&&(e=e.slice(1));for(f=0;f<e.length;f+=1)typeof h[e[f]]==="undefined"&&(h[e[f]]={}),h=h[e[f]];return h};
(function(){var e=KICK.namespace("KICK.core"),h=KICK.namespace("KICK.scene"),f=KICK.namespace("KICK.renderer");e.Engine=function(m,p){var g=null,c=document.getElementById(m),n=["experimental-webgl","webgl"],a=this,b,d=(new Date).getTime()-16,j=0,v=new e.Time,k=0,i=0,r=[],l=null,t=new h.Scene(this),s=null,o=function(b){a._gameLoop(b)},w=1;Object.defineProperties(this,{gl:{get:function(){return g}},canvas:{value:c},activeScene:{get:function(){return t},set:function(a){t=a}},keyInput:{get:function(){l||
(l=new e.KeyInput,this.addFrameListener(l));return l}},renderer:{get:function(){return b},set:function(c){h.ComponentChangedListener.isComponentListener(b)&&this.activeScene.removeComponentListener(b);b=c;h.ComponentChangedListener.isComponentListener(b)&&this.activeScene.addComponentListener(b);b.init(a)}},time:{value:v},config:{value:new e.Config(p||{})}});this.pause=function(){s!==null&&(cancelRequestAnimFrame(s),s=null)};this.resume=function(){s===null&&(d=(new Date).getTime()-16,s=requestAnimationFrame(o,
this.canvas))};this._gameLoop=function(a){this.activeScene.update();this.renderer.render();for(var b=r.length-1;b>=0;b--)r[b].frameUpdated();j=a-d;d=a;k+=j;i+=1;s=requestAnimationFrame(o,this.canvas)};this.addFrameListener=function(a){typeof a.frameUpdated!=="function"&&KICK.core.Util.fail("frameListener must define the method frameUpdated");r.push(a)};this.removeFrameListener=function(a){return e.Util.removeElementFromArray(a)};this.createUID=function(){return w++};this.canvasResized=function(){g.viewportWidth=
c.width;g.viewportHeight=c.height};(function(){for(var b=n.length-1;b>=0;b--)try{if(g=c.getContext(n[b],{preserveDrawingBuffer:a.config.preserveDrawingBuffer}))break}catch(e){alert(e)}if(!g)throw{name:"Error",message:"Cannot create gl-context"};a.config.enableDebugContext&&(window.WebGLDebugUtils?g=WebGLDebugUtils.makeDebugContext(g):console.log("webgl-debug.js not included - cannot find WebGLDebugUtils"));a.canvasResized();a.config.checkCanvasResizeInterval&&setInterval(function(){(c.height!==g.viewportWidth||
c.width!==g.viewportHeight)&&a.canvasResized()},a.config.checkCanvasResizeInterval);a.renderer=new f.ForwardRenderer;g.clearColor(0,0,0,1);g.enable(2929);g.clear(16640);Object.defineProperties(v,{time:{get:function(){return k}},deltaTime:{get:function(){return j}},frameCount:{get:function(){return i}},avarageFramesPerSecond:{get:function(){return i/(k*0.0010)}}});Object.freeze(v);i=k=0;a._gameLoop(d)})()};e.Config=function(e){this.maxNumerOfLights=e.maxNumerOfLights?e.maxNumerOfLights:1;this.enableDebugContext=
typeof e.enableDebugContext==="boolean"?e.enableDebugContext:!1;this.preserveDrawingBuffer=e.preserveDrawingBuffer||!1;this.checkCanvasResizeInterval=e.checkCanvasResizeInterval||0};e.Time=function(){};e.KeyInput=function(){var f=[],h=[],g=[],c=e.Util.removeElementFromArray,n=e.Util.contains;this.isKeyDown=function(a){return n(f,a)};this.isKeyUp=function(a){return n(h,a)};this.isKey=function(a){return n(g,a)};this.frameUpdated=function(){f.length=0;h.length=0};document.addEventListener("keydown",
function(a){a=a.keyCode;n(g,a)||(f.push(a),g.push(a))},!1);document.addEventListener("keyup",function(a){a=a.keyCode;h.push(a);c(g,a)},!1)};e.Util={scaleImage:function(e,f,g){var c=document.createElement("canvas");c.width=f;c.height=g;c.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,c.width,c.height);return c},fail:function(e){debugger;console.error(e)},typedArrayToArray:function(e){for(var f=e.length,g=Array(f),c=0;c<f;c++)g[c]=e[c];return g},removeElementFromArray:function(e,f,g){for(var c=
!1,h=e.length-1;h>=0;h--)if(e[h]===f&&(c=!0,e.splice(h,1),!g))break;return c},removeElementsFromArray:function(e,f){var g,c;for(g=e.length-1;g>=0;g--)for(c=f.length-1;c>=0;c--)e[g]===f[c]&&e.splice(g,1)},insertSorted:function(e,f,g){var c;if(!g)g=this.numberSortFunction;for(c=f.length-1;c>=0;c--)if(g(f[c],e)<0){f.splice(c+1,0,e);return}f.unshift(e)},numberSortFunction:function(e,f){return e-f},contains:function(e,f){for(var g=e.length-1;g>=0;g--)if(e[g]===f)return!0;return!1}};Object.freeze(e.Util);
if(typeof window.requestAnimationFrame==="undefined")window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,16.7)}}(),window.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||
clearTimeout;if(typeof window.console==="undefined")window.console={};if(typeof window.console.log==="undefined")window.console.log=function(e){alert(e)}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,f;e[0]==="KICK"&&(e=e.slice(1));for(f=0;f<e.length;f+=1)typeof h[e[f]]==="undefined"&&(h[e[f]]={}),h=h[e[f]];return h};
(function(){var e=KICK.namespace("KICK.texture"),h=KICK.namespace("KICK.core");e.Texture=function(e,m,p){var g=e.gl,c=e.createUID(),e=m||{},n=g.createTexture(),a=e.wrapS||10497,b=e.wrapT||10497,d=e.minFilter||9729,j=e.magFilter||9729,v=typeof e.generateMipmaps==="boolean"?e.generateMipmaps:!0,k=typeof e.autoScaleImage==="boolean"?e.autoScaleImage:!0,i=e.dataURI||null,r=typeof e.flipY==="boolean"?e.flipY:!0,l=e.intformat||6408,t,s=function(a){--a;for(var b=1;b<32;b<<=1)a|=a>>b;return a+1};p&&e.uid&&
(p[e.uid]=c);if(!g.activeTexture)g.activeTexture={};t=g.activeTexture;this.bind=function(a){t[a]!==this&&(g.activeTexture(33984+a),g.bindTexture(3553,n),t[a]=this)};this.setImage=function(a,b){i=b;if((a.width&a.width-1)!=0||(a.height&a.height-1)!=0)var c=s(a.width),d=s(a.height),a=h.Util.scaleImage(a,c,d);this.bind(0);r?g.pixelStorei(37440,!0):g.pixelStorei(37440,!1);g.pixelStorei(3317,1);g.texImage2D(3553,0,l,l,5121,a);v&&g.generateMipmap(3553)};this.setImageData=function(a,b,c,d,e,f){d!==5121&&
d!==32819&&d!==32820&&d!==33635&&KICK.core.Util.fail("Texture.setImageData (type) should be either 5121, 32819, 32820 or 33635");i=f;this.bind(0);g.pixelStorei(3317,1);g.texImage2D(3553,0,l,a,b,c,l,d,e);v&&g.generateMipmap(3553)};this.setTemporaryTexture=function(){var a=new Uint8Array([255,255,255,0,0,0,0,0,0,255,255,255]),b=l;l=6407;this.setImageData(2,2,0,5121,a,"tempTexture");l=b};Object.defineProperties(this,{uid:{value:c},dataURI:{get:function(){return i}},wrapS:{get:function(){return a},set:function(b){b!==
33071&&b!==10497&&KICK.core.Util.fail("Texture.wrapS should be either 33071 or 10497");a=b}},wrapT:{get:function(){return b},set:function(a){a!==33071&&a!==10497&&KICK.core.Util.fail("Texture.wrapT should be either 33071 or 10497");return b}},minFilter:{get:function(){return d},set:function(a){a!==9728&&a!==9729&&a!==9984&&a!==9985&&a!==9986&&a!==9987&&KICK.core.Util.fail("Texture.minFilter should be either 9728, 9729, 9984, 9985, 9986, 9987");d=a}},magFilter:{get:function(){return j},set:function(a){a!==
9728&&a!==9729&&KICK.core.Util.fail("Texture.magFilter should be either 9728 or 9729");j=a}},autoScaleImage:{get:function(){return k},set:function(a){typeof a!=="boolean"&&KICK.core.Util.fail("Texture.autoScaleImage was not be a boolean");k=a}},generateMipmaps:{get:function(){return v},set:function(a){typeof a!=="boolean"&&KICK.core.Util.fail("Texture.generateMipmaps was not a boolean");v=a}},flipY:{get:function(){return r},set:function(a){typeof a!=="boolean"&&KICK.core.Util.fail("Texture.flipY was not a boolean");
r=a}},internalFormal:{get:function(){return l},set:function(a){a!==6406&&a!==6407&&a!==6408&&a!==6409&&a!==6410&&KICK.core.Util.fail("Texture.internalFormal should be either 6406, 6407, 6408, 6409, or LUMINANCE_ALPHA");l=a}}});this.toJSON=function(){return{uid:c,wrapS:a,wrapT:b,minFilter:d,magFilter:j,generateMipmaps:v,autoScaleImage:k,dataURI:i,flipY:r,internalFormal:l}}}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,f;e[0]==="KICK"&&(e=e.slice(1));for(f=0;f<e.length;f+=1)typeof h[e[f]]==="undefined"&&(h[e[f]]={}),h=h[e[f]];return h};
(function(){var e=KICK.namespace("KICK.scene"),h=KICK.namespace("KICK.core");KICK.namespace("KICK.math");var f=KICK.namespace("KICK.math.vec3"),m=KICK.namespace("KICK.math.quat4"),p=KICK.namespace("KICK.math.vec4"),g=KICK.namespace("KICK.math.mat4");e.GameObject=function(c){var e=[];Object.defineProperties(this,{scene:{value:c},engine:{value:c.engine},transform:{value:new KICK.scene.Transform(this)}});this.addComponent=function(a){if(a.gameObject)throw{name:"Error",message:"Component "+a+" already added to gameObject "+
a.gameObject};if(!a.scriptPriority)a.scriptPriority=0;a.gameObject=this;e.push(a);this.scene.addComponent(a)};this.removeComponent=function(a){delete a.gameObject;h.Util.removeElementFromArray(e,a);this.scene.removeComponent(a)};this.destroy=function(){var a;for(a=0;a<e.length;a++)this.removeComponent(e[a]);this.scene.destroyObject(this)};this.getComponentOfType=function(a){var b,d;for(d=e.length-1;d>=0;d--)if(b=e[d],b instanceof a)return b;return a===c.Transform?this.transform:null}};e.Transform=
function(c){var e=g.identity(g.create()),a=g.identity(g.create()),b=g.identity(g.create()),d=g.identity(g.create()),j=f.create([0,0,0]),v=f.create([0,0,0]),k=m.create([0,0,0,1]),i=m.create([0,0,0,1]),r=f.create([1,1,1]),l=new Int8Array(6),t=[],s=null,o=this,w=function(){var a;l[2]=1;l[3]=1;l[4]=1;l[5]=1;for(a=t.length-1;a>=0;a--)t[a]._markGlobalDirty()},u=function(){l[0]=1;l[1]=1;w()};Object.defineProperties(this,{gameObject:{value:c},position:{get:function(){if(s==null)return f.create(v);l[4]&&(g.multiplyVec3(this.getGlobalMatrix(),
[0,0,0],j),l[4]=0);return f.create(j)},set:function(a){var b;s==null?this.localPosition=a:(b=this.position,f.set(a,v),this.localPosition=[v[0]+b[0]-a[0],v[1]+b[1]-a[1],v[2]+b[2]-a[2]])}},localPosition:{get:function(){return f.create(v)},set:function(a){f.set(a,v);u()}},localRotationEuler:{get:function(){var a=f.create();m.toEuler(i,a);return a},set:function(a){m.setEuler(a,i);u()}},rotationEuler:{get:function(){var a=f.create();m.toEuler(this.rotation,a);return a},set:function(a){var b=m.create();
m.setEuler(a,b);this.rotation=b}},rotation:{get:function(){var a=null;if(s==null)return p.create(i);if(l[5]){m.set(i,k);for(a=this.parent;a!=null;)m.multiply(a.localRotation,k,k),a=a.parent;l[5]=!1}return k},set:function(a){if(s==null)this.localRotation=a;else{var b=m.create();m.difference(a,this.rotation,b);this.localRotation=m.multiply(i,b)}}},localRotation:{get:function(){return i},set:function(a){m.set(a,i);u()}},localScale:{get:function(){return f.create(r)},set:function(a){f.set(a,r);u()}},
children:{value:t},parent:{get:function(){return s},set:function(a){a===this&&KICK.core.Util.fail("Cannot assign parent to self");a===null?(s=null,h.Util.removeElementFromArray(a.children,this)):(s=a,a.children.push(this));w()}}});this.getLocalMatrix=function(){l[0]&&(g.setTRS(v,i,r,e),l[0]=0);return e};this.getLocalTRSInverse=function(){l[1]&&(g.setTRSInverse(v,i,r,b),l[1]=0);return b};this.getGlobalMatrix=function(){if(l[2]){g.set(o.getLocalMatrix(),a);for(var b=o.parent;b!==null;)g.multiply(a,
b.getLocalMatrix(),a),b=b.parent;l[2]=0}return a};this.getGlobalTRSInverse=function(){if(l[3]){g.set(o.getLocalTRSInverse(),d);for(var a=o.parent;a!==null;)g.multiply(d,a.getLocalTRSInverse(),d),a=a.parent;l[3]=0}return d};this._markGlobalDirty=w};e.Scene=function(c){var g=[],a=[],b=[],d=[],f=[],m=[],k=[],i=[],p=function(a,b){return a.scriptPriority-b.scriptPriority};this.addComponentListener=function(a){if(!e.ComponentChangedListener.isComponentListener(a))throw{name:"Error",message:"Component listener does not have the correct interface. It should contain the two functions: componentsAdded(components) and componentsRemoved(components)"};
i.push(a)};this.removeComponentListener=function(a){h.Util.removeElementFromArray(i,a)};this.addComponent=function(a){h.Util.insertSorted(a,m,p)};this.removeComponent=function(a){k.push(a)};Object.defineProperty(this,"engine",{value:c});this.loadScene=function(){throw Error("Not implemented");};this.saveScene=function(){throw Error("Not implemented");};this.createGameObject=function(){var b=new e.GameObject(this);a.push(b);return b};this.destroyObject=function(a){b.push(a)};this.getNumberOfGameObjects=
function(){return g.length};this.getGameObject=function(a){return g[a]};this.update=function(){var c;for(c=d.length-1;c>=0;c--)d[c].update();for(c=f.length-1;c>=0;c--)f[c].lateUpdate();var e;if(a.length>0)g=g.concat(a),a.length=0;if(b.length>0)h.Util.removeElementsFromArray(g,b),b.length=0;if(m.length>0){var s=m;m=[];for(c=s.length-1;c>=0;c--)e=s[c],typeof e.activated==="function"&&e.activated(),typeof e.update==="function"&&h.Util.insertSorted(e,d,p),typeof e.lateUpdate==="function"&&h.Util.insertSorted(e,
f,p);for(c=i.length-1;c>=0;c--)i[c].componentsAdded(s)}if(k.length>0){s=k;k=[];for(c=s.length-1;c>=0;c--)e=s[c],typeof e.deactivated==="function"&&e.deactivated(),typeof e.update==="function"&&h.Util.removeElementFromArray(d,e),typeof e.lateUpdate==="function"&&h.Util.removeElementFromArray(f,e);for(c=i.length-1;c>=0;c--)i[c].componentsRemoved(s)}};this.debug=function(){console.log("gameObjects "+g.length,g,"gameObjectsNew "+a.length,a,"gameObjectsDelete "+b.length,b)}};e.Camera=function(c){var e,
a=this,b,d=function(a){return typeof a==="number"};this.activated=function(){var a=this.gameObject;b=a.transform;e=a.engine.gl};this.setupCamera=function(c,d,f){e.viewport(0,0,e.viewportWidth,e.viewportHeight);if(e.currentClearColor!==a.clearColor){var i=e.currentClearColor=a.clearColor;e.clearColor(i[0],i[1],i[2],i[3])}if(!a._currentClearFlags)a._currentClearFlags=(a.clearFlagColor?16384:0)+(a.clearFlagDepth?256:0);e.clear(a._currentClearFlags);this.cameraTypePerspective?g.perspective(this.fieldOfView,
e.viewportWidth/e.viewportHeight,this.near,this.far,c):g.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far,c);i=b.getGlobalTRSInverse();g.set(i,d);g.multiply(c,d,f)};this.fieldOfView=d(c.fieldOfView)?c.fieldOfView:60;this.near=d(c.near)?c.near:0.1;this.far=d(c.far)?c.far:1E3;this.cameraTypePerspective=typeof c.cameraTypePerspective==="boolean"?c.cameraType:!0;this.left=d(c.left)?c.left:-1;this.right=d(c.right)?c.right:1;this.bottom=d(c.bottom)?c.bottom:-1;this.top=d(c.top)?c.top:
1;this.clearColor=c.clearColor?c.clearColor:[1,1,1,1];this.clearFlagColor=c.clearFlagColor?c.clearFlagColor:!0;this.clearFlagDepth=c.clearFlagDepth?c.clearFlagDepth:!0;this.setupClearFlags(c.clearColor,c.clearDepth)};e.Camera.prototype.setupClearFlags=function(c,e){this.clearColor=c;this.clearDepth=e;delete this._currentClearFlags};e.ComponentChangedListener={isComponentListener:function(c){return c&&typeof c.componentsAdded==="function"&&typeof c.componentsRemoved==="function"}};e.MeshRenderer=function(){var c;
this.activated=function(){c=this.gameObject.transform};this.material=void 0;this.render=function(e,a,b,d){var g=this.mesh,f=this.material;g.bind(f.shader);f.bind(e,a,b,c,d);g.render()};this.mesh=void 0};e.Light=function(c){var e=f.create([1,1,1]),a,b,d=f.create(),g=function(){f.set([e[0]*b,e[1]*b,e[2]*b],d)},h,k,c=c||{};c.color&&f.set(c.color,e);b=c.intensity||1;g();c.type&&c.type!==3&&c.type!==2&&c.type!==1&&KICK.core.Util.fail("Light type must be 3, 2 or 1");a=c.type||3;Object.defineProperties(this,
{color:{get:function(){return f.create(e)},set:function(a){f.set(a,e);g()}},type:{get:function(){return a}},intensity:{get:function(){return b},set:function(a){b=a;g()}},colorIntensity:{value:d},gameObject:{get:function(){return h},set:function(a){h=a}},scriptPriority:{get:function(){return k},set:function(a){k=a}}})};Object.freeze(e.Light);e.SceneLights=function(){var c=null,e=null,a=f.create(),b=f.create(),d=null;Object.defineProperties(this,{ambientLight:{get:function(){return c},set:function(a){if(a&&
c)throw Error("Cannot have multiple ambient lights in the scene");c=a}},directionalLight:{get:function(){return e},set:function(a){if(a&&e)throw Error("Cannot have multiple directional lights in the scene");e=a;d=a!==null?e.gameObject.transform:null}},directionalHalfVector:{value:a},directionalLightDirection:{value:b},otherLights:{value:[]}});this.recomputeDirectionalLight=function(c){e!==null&&(f.set([0,0,1],b),m.multiplyVec3(d.rotation,b),g.multiplyVec3(c,b),f.set([0,0,-1],a),g.multiplyVec3(c,a),
f.add(a,b,a),f.lengthSqr(a)<0.0010?f.set([0,0,1],a):f.normalize(a))}}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,f;e[0]==="KICK"&&(e=e.slice(1));for(f=0;f<e.length;f+=1)typeof h[e[f]]==="undefined"&&(h[e[f]]={}),h=h[e[f]];return h};
(function(){var e=KICK.namespace("KICK.mesh");KICK.namespace("KICK.scene");KICK.namespace("KICK.core");KICK.namespace("KICK.math");var h=KICK.namespace("KICK.math.vec3");KICK.namespace("KICK.math.quat4");var f=KICK.namespace("KICK.math.vec4"),m=KICK.namespace("KICK.math.mat4"),p=KICK.core.Util.fail;e.MeshData=function(g){var c={},f=this,a,b,d,j,v,k,i=function(){j=d=b=null},r=function(a,b){if(a===5126||a===5124){var d=a===5126?Float32Array:Int32Array;return{get:function(){return c[b]},set:function(a){a&&
!(a instanceof d)&&(a=new d(a));c[b]=a;i()}}}else p("Unexpected type")},l=function(){var a=[],c=[],e=[],g=0,i=[],h,k,l=f.vertex,l=l?l.length/3:0,m={};h=function(b,d,h){var j=f[b];j&&(a.push(d),c.push(b),e.push(h),i.push(j),m[b]={pointer:g*4,size:d,normalized:!1,type:h},g+=d)};h("vertex",3,5126);h("normal",3,5126);h("uv1",2,5126);h("uv2",2,5126);h("tangent",4,5126);h("color",4,5126);h("int1",1,5124);h("int2",2,5124);h("int3",3,5124);h("int4",4,5124);var p=new ArrayBuffer(g*l*4);for(k=0;k<l;k++)for(var v=
k*g*4,r=0;r<c.length;r++){h=e[r]===5126?new Float32Array(p,v):new Int32Array(p,v);for(var B=i[r],z=a[r],C=0;C<z;C++)h[C]=B[k*z+C],v+=4}b=p;d=m;j=g*4};Object.defineProperties(this,{name:{get:function(){return k},set:function(a){k=a}},interleavedArray:{get:function(){b===null&&f.vertex&&l();return b},set:function(a){a&&!(a instanceof ArrayBuffer)&&p("MeshData.interleavedArray must be an ArrayBuffer");a?b=a:i()}},interleavedArrayFormat:{get:function(){b===null&&f.vertex&&l();return d},set:function(a){if(a!==
null)for(var b in a){var c=a[b];typeof c==="object"&&(typeof c.pointer!=="number"||typeof c.size!=="number"||typeof c.normalized!=="boolean"||typeof c.type!=="number")&&p("Invalid object signature - expected {pointer:,size:,normalized:,type:}")}a?d=a:i()}},vertexAttrLength:{get:function(){b===null&&f.vertex&&l();return j},set:function(a){(typeof a!=="number"||a<0)&&p("Invalid MeshData.vertexAttrLength - expected a real number");a?j=a:i()}},vertex:r(5126,"vertex"),normal:r(5126,"normal"),uv1:r(5126,
"uv1"),uv2:r(5126,"uv2"),tangent:r(5126,"tangent"),color:r(5126,"color"),int1:r(5124,"int1"),int2:r(5124,"int2"),int3:r(5124,"int3"),int4:r(5124,"int4"),indices:{get:function(){return a},set:function(b){b&&!(b instanceof Uint16Array)&&(b=new Uint16Array(b));a=b;i()}},meshType:{get:function(){return v},set:function(a){a!=4&&a!=6&&a!=5&&p("MeshData.meshType must be 4, 6 or 5");v=a}}});this.combine=function(a,b){if(f.meshType!==a.meshType||f.meshType==6)return f.meshType!==a.meshType?p("Mesh.combine does not support different meshTypes"):
p("Mesh.combine does not support triangle fans"),null;for(var c="vertex,normal,uv1,uv2,tangent,color,int1,int2,int3,int4,indices".split(","),d=c.length-1;d>=0;d--){var g=c[d];(!f[g]||!a[g])&&c.splice(d,1)}d=function(a,b,d,e){for(var g=c.length-1;g>=0;g--){var f=c[g];if(a[f]){var i=b[f];if(d&&f==="vertex")for(var i=new Float32Array(i),j=h.wrapArray(i),k=j.length-1;k>=0;k--)m.multiplyVec3(d,j[k]);if(e&&f==="indices"){i=new Uint16Array(i);j=i.length;for(k=0;k<j;k++)i[k]+=e}for(k=0;k<i.length;k++)a[f].push(i[k])}else a[f]=
KICK.core.Util.typedArrayToArray(b[f])}};g={meshType:f.meshType};d(g,f,null,0);d(g,a,b,f.indices.length);f.meshType===5&&g.indices.splice(f.indices,0,f.indices,f.indices+1);return new e.MeshData(g)};g||(g={});f.name=g.name;f.vertex=g.vertex;f.normal=g.normal;f.uv1=g.uv1;f.uv2=g.uv2;f.tangent=g.tangent;f.color=g.color;f.int1=g.int1;f.int2=g.int2;f.int3=g.int3;f.int4=g.int4;f.indices=g.indices;f.meshType=g.meshType||4;f.interleavedArray=g.interleavedArray};e.MeshData.prototype.recalculateNormals=function(){var e=
this.vertex.length/3,c=this.indices.length/3,f=this.indices,a=h.wrapArray(this.vertex),b,d={},j=h.array(e,d),m=h.create(),k=h.create(),i=h.create();for(b=0;b<c;b++){var p=f[b*3+0],l=f[b*3+1],t=f[b*3+2],s=a[p],o=a[t];h.subtract(a[l],s,m);h.subtract(o,s,k);h.cross(m,k,i);h.normalize(i);h.add(j[p],i);h.add(j[l],i);h.add(j[t],i)}for(b=0;b<e;b++)h.normalize(j[b]);this.normal=d.mem};e.MeshData.prototype.recalculateTangents=function(){var e=h.wrapArray(this.vertex),c=e.length,m=h.wrapArray(this.normal),
a=this.uv1,b=this.indices,d=b.length/3,j=this.tangent,p=h.array(c),k=h.array(c),i,r=h.create(),l=h.create();for(i=0;i<d;i++){var t=b[i*3+0],s=b[i*3+1],o=b[i*3+2],w=e[t],u=e[s],q=e[o],G=a[t],E=a[s],x=a[o],y=u[0]-w[0],D=q[0]-w[0],A=u[1]-w[1],B=q[1]-w[1],u=u[2]-w[2],w=q[2]-w[2],q=E[0]-G[0],z=x[0]-G[0],E=E[1]-G[1],x=x[1]-G[1],G=1/(q*x-z*E),x=h.create([(x*y-E*D)*G,(x*A-E*B)*G,(x*u-E*w)*G]),y=h.create([(q*D-z*y)*G,(q*B-z*A)*G,(q*w-z*u)*G]);h.add(p[t],x);h.add(p[s],x);h.add(p[o],x);h.add(k[t],y);h.add(k[s],
y);h.add(k[o],y)}if(!j)this.tangent=j=new Float32Array(c*4);j=f.wrapArray(j);for(i=0;i<c;i++)e=m[i],a=p[i],h.subtract(a,e,r),h.dot(e,a,l),h.set(h.normalize(h.multiply(r,l)),j[i]),j[i][3]=h.dot(h.cross(e,a,h.create()),k[i])<0?-1:1};e.Mesh=function(g,c,f){var a=g.gl,b,d,h,m,k,i,r,l;f instanceof e.MeshData||p("meshData constructor parameter must be defined");Object.defineProperties(this,{name:{get:function(){return m},set:function(a){m=a||"Mesh"}},meshData:{get:function(){return k},set:function(c){k=
c;c=k.indices;typeof h==="number"&&a.deleteBuffer(h);typeof b==="number"&&a.deleteBuffer(b);d=k.interleavedArrayFormat;i=k.vertexAttrLength;r=k.meshType;l=c.length;b=a.createBuffer();console.log("Fill data in "+b+" length of data "+k.interleavedArray.byteLength);a.bindBuffer(34962,b);a.bufferData(34962,k.interleavedArray,35044);h=a.createBuffer();console.log("Fill data in "+h+" length of data "+c.length);a.bindBuffer(34963,h);a.bufferData(34963,c,35044)}}});c||(c={});this.name=c.name;this.meshData=
f;this.verify=function(a){var b=[],c,e;for(e in a.lookupAttribute)typeof e==="string"&&((c=d[e])||b.push(e));return null};this.bind=function(c){c.bind();a.bindBuffer(34962,b);for(var e in d)if(typeof c.lookupAttribute[e]!=="undefined"){var g=d[e],f=c.lookupAttribute[e];a.enableVertexAttribArray(f);a.vertexAttribPointer(f,g.size,g.type,!1,i,g.pointer)}a.bindBuffer(34963,h)};this.render=function(){a.drawElements(r,l,5123,0)}}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,f;e[0]==="KICK"&&(e=e.slice(1));for(f=0;f<e.length;f+=1)typeof h[e[f]]==="undefined"&&(h[e[f]]={}),h=h[e[f]];return h};
(function(){var e=KICK.namespace("KICK.renderer"),h=KICK.namespace("KICK.core"),f=KICK.namespace("KICK.scene"),m=KICK.namespace("KICK.math").mat4;e.NullRenderer=function(){};e.NullRenderer.prototype.render=function(){};e.NullRenderer.prototype.init=function(){};e.NullRenderer.prototype.addRenderableComponent=function(){};e.NullRenderer.prototype.removeRenderableComponent=function(){};e.ForwardRenderer=function(){var e=[],g=[],c=m.create(),n=m.create(),a=m.create(),b,d=[],j=new KICK.scene.SceneLights;
this.init=function(a){b=a.gl};this.render=function(){var d,f;for(d=g.length-1;d>=0;d--){f=g[d];f.setupCamera(c,n,a);j.recomputeDirectionalLight(n);for(f=e.length-1;f>=0;f--)e[f].render(c,n,a,j)}b.flush()};this.componentsAdded=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];c instanceof f.Camera&&g.push(c);if(c instanceof f.Light){var h=c;d.push(h);h.type==1?j.ambientLight=h:h.type===2?j.directionalLight=h:j.otherLights.push(h)}typeof c.render==="function"&&e.push(c)}};this.componentsRemoved=
function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];c instanceof f.Camera&&h.Util.removeElementFromArray(g,c);if(c instanceof f.Light){var m=c;h.Util.removeElementFromArray(d,m);m.type==1?j.ambientLight=null:m.type===2?j.directionalLight=null:h.Util.removeElementFromArray(j.otherLights,m)}typeof c.render==="function"&&h.Util.removeElementFromArray(e,c)}}}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,f;e[0]==="KICK"&&(e=e.slice(1));for(f=0;f<e.length;f+=1)typeof h[e[f]]==="undefined"&&(h[e[f]]={}),h=h[e[f]];return h};
(function(){var e=KICK.namespace("KICK.material"),h=KICK.namespace("KICK.math").mat4,f=KICK.namespace("KICK.core");e.Shader=function(f,h,g){var c=f.gl,n=this,h=h||{},a=f.createUID(),b=-1,d=h.faceCulling||1029,j=h.zTest||513,v=h.blend||!1,k=h.blendSFactor||770,i=h.blendDFactor||771,r,l=e.GLSLConstants,t=h.vertexShaderSrc||l["default_vs.glsl"],s=h.fragmentShaderSrc||l["default_fs.glsl"],o=h.errorLog,w=function(){r=(k+i*1E4)*(v?-1:1)},u=function(a,b){var d,a=e.Shader.getPrecompiledSource(a);d=b?c.createShader(35632):
c.createShader(35633);c.shaderSource(d,a);c.compileShader(d);return!c.getShaderParameter(d,35713)?(d=c.getShaderInfoLog(d),typeof o==="function"&&o(d),null):d};Object.defineProperties(this,{uid:{value:a},gl:{value:c},vertexShaderSrc:{get:function(){return t},set:function(a){typeof a!=="string"&&KICK.core.Util.fail("Shader.vertexShaderSrc must be a string");t=a}},fragmentShaderSrc:{get:function(){return s},set:function(a){typeof a!=="string"&&KICK.core.Util.fail("Shader.fragmentShaderSrc must be a string");
s=a}},errorLog:{get:function(){return o},set:function(a){a&&typeof a!=="function"&&KICK.core.Util.fail("Shader.errorLog should be a function (or null)");o=a}},engine:{value:f},shaderProgramId:{get:function(){return b}},faceCulling:{get:function(){return d},set:function(a){a!==1028&&a!==1032&&a!==1029&&a!==0&&KICK.core.Util.fail("Shader.faceCulling must be KICK.material.Shader.FRONT, KICK.material.Shader.BACK (default), KICK.material.Shader.NONE");d=a}},zTest:{get:function(){return j},set:function(a){a!==
512&&a!==513&&a!==514&&a!==515&&a!==516&&a!==517&&a!==518&&a!==519&&KICK.core.Util.fail("Shader.zTest must be 512, 513,514,515,516,517,518, or 519");j=a}},blend:{get:function(){return v},set:function(a){typeof a!=="boolean"&&KICK.core.Util.fail("Shader.blend must be a boolean");v=a;w()}},blendSFactor:{get:function(){return k},set:function(a){a!==32771&&a!==32772&&a!==776&&KICK.core.Util.fail("Shader.blendSFactor must be a one of 0, 1, 768, 769, 774, 775, 770, 771, 772, 773, 32769, 32770, 32771, 32772, and 776.");
k=a;w()}},blendDFactor:{get:function(){return i},set:function(a){a!==32771&&a!==32772&&KICK.core.Util.fail("Shader.blendSFactor must be a one of 0, 1, 768, 769, 774, 775, 770, 771, 772, 773, 32769, 32770, 32771, and 32772.");i=a;w()}}});this.updateShader=function(){var a=o||console.log,d=u(t,!1,a),e=u(s,!0,a),g=e===null||d===null;g&&(d=u(l["default_vs.glsl"],!1,a),e=u(l["default_fs.glsl"],!0,a));b=c.createProgram();c.attachShader(b,d);c.attachShader(b,e);c.linkProgram(b);if(!c.getProgramParameter(b,
35714))return a("Could not initialise shaders"),!1;c.useProgram(b);d=c.getProgramParameter(b,35718);this.activeUniforms=Array(d);this.lookupUniform={};for(a=0;a<d;a++)e=c.getActiveUniform(b,a),this.activeUniforms[a]={size:e.size,type:e.type,name:e.name,location:c.getUniformLocation(b,e.name)},this.lookupUniform[e.name]=this.activeUniforms[a];d=c.getProgramParameter(b,35721);this.activeAttributes=Array(d);this.lookupAttribute={};for(a=0;a<d;a++)e=c.getActiveAttrib(b,a),this.activeAttributes[a]={size:e.size,
type:e.type,name:e.name},this.lookupAttribute[e.name]=a;return!g};this.destroy=function(){b!==-1&&(c.deleteProgram(b),b=-1)};this.isValid=function(){return b!==-1};this.bind=function(){this.isValid||KICK.core.Util.fail("Cannot bind a shader that is not valid");c.useProgram(b);var a=n.faceCulling,d=c.faceCulling;if(d!==a)a===0?c.disable(2884):((!d||d===0)&&c.enable(2884),c.cullFace(a)),c.faceCulling=a;a=n.zTest;if(c.zTest!=a)c.depthFunc(a),c.zTest=a;c.blendKey!==r&&(v?c.enable(3042):c.disable(3042),
c.blendFunc(k,i))};this.toJSON=function(){return{faceCulling:d,zTest:j,vertexShaderSrc:t,fragmentShaderSrc:s}};g&&h.uid&&(g[h.uid]=a);w();n.updateShader()};e.Shader.getPrecompiledSource=function(f){for(var h in e.GLSLConstants)if(typeof h==="string")var g=e.GLSLConstants[h],f=f.replace('#pragma include "'+h+'"',g),f=f.replace("#pragma include '"+h+"'",g);return f};Object.freeze(e.Shader);e.Shader.prototype.bindUniform=function(e,f,g,c,n,a){var b=this.gl,d=e.uniforms,j,v,k,i,r=this.lookupUniform._mv,
l=this.lookupUniform._proj,t=this.lookupUniform._mvProj,s=this.lookupUniform._norm,e=this.lookupUniform._time,o=a.ambientLight,w=a.directionalLight,u=a.otherLights,q,G=0;for(j in d)if(v=this.lookupUniform[j])switch(k=d[j],i=v.location,k=k.value,v.type){case 5126:b.uniform1fv(i,k);break;case 35674:b.uniformMatrix2fv(i,!1,k);break;case 35675:b.uniformMatrix3fv(i,!1,k);break;case 35676:b.uniformMatrix4fv(i,!1,k);break;case 35664:b.uniform2fv(i,k);break;case 35665:b.uniform3fv(i,k);break;case 35666:b.uniform4fv(i,
k);break;case 5124:b.uniform1iv(i,k);break;case 35667:b.uniform2iv(i,k);break;case 35668:b.uniform3iv(i,k);break;case 35669:b.uniform4iv(i,k);break;case 35680:KICK.core.Util.fail("Not implemented");break;case 35678:k.bind(G);b.uniform1i(i,G);G++;break;default:console.log("Warn cannot find type "+v.type)}l&&b.uniformMatrix4fv(l.location,!1,f);if(r||s)q=n.getGlobalMatrix(),f=h.multiply(g,q,h.create()),r&&b.uniformMatrix4fv(r.location,!1,f),s&&(f=h.toNormalMat3(f),b.uniformMatrix3fv(s.location,!1,f));
t&&(q=q||n.getGlobalMatrix(),b.uniformMatrix4fv(t.location,!1,h.multiply(c,q,h.create())));if(o!==null)(c=this.lookupUniform._ambient)&&b.uniform3fv(c.location,o.colorIntensity);if(w!==null&&(c=this.lookupUniform["_dLight.colInt"]))b.uniform3fv(c.location,w.colorIntensity),c=this.lookupUniform["_dLight.lDir"],b.uniform3fv(c.location,a.directionalLightDirection),c=this.lookupUniform["_dLight.halfV"],b.uniform3fv(c.location,a.directionalHalfVector);for(a=u.length-1;a>=0;a--);if(e)a=this.engine.time,
b.uniform1f(e.location,a.time)};e.Material=function(h){var h=h||{},p=h.name||"Material",g=h.shader,c=h.uniforms||{},n=this;Object.defineProperties(this,{name:{value:p,writable:!0},shader:{value:g,writable:!0},uniforms:{value:c,writeable:!0}});this.bind=function(a,b,c,e,f){g.bindUniform(n,a,b,c,e,f)};this.toJSON=function(){var a={},b;for(b in c)if(typeof b==="string"){var d=c[b],e=d.value;e instanceof Float32Array||e instanceof Int32Array?e=f.Util.typedArrayToArray(e):(!e instanceof KICK.texture.Texture&&
KICK.core.Util.fail("Unknown uniform value type. Expected Texture"),e=e.uid);a[b]={type:d.type,value:e}}return{name:p,shader:g?g.uid:0,uniforms:a}};e.Material.verifyUniforms(c)};e.Material.verifyUniforms=function(e){var f,g;for(f in e)if(Array.isArray(e[f].value)||typeof e[f].value==="number")g=e[f].type,g===5124||g===35667||g===35668||g===35669?e[f].value=new Int32Array(e[f].value):g===35678||g===35680?typeof e[f].value!==KICK.texture.Texture&&KICK.core.Util.fail("Uniform value should be a texture object but was "+
e[f].value):e[f].value=new Float32Array(e[f].value)}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,f;e[0]==="KICK"&&(e=e.slice(1));for(f=0;f<e.length;f+=1)typeof h[e[f]]==="undefined"&&(h[e[f]]={}),h=h[e[f]];return h};
(function(){var e=KICK.namespace("KICK.scene"),h=KICK.namespace("KICK.mesh"),f=KICK.namespace("KICK.math"),m=f.vec3,p=f.vec2;e.MeshFactory={};e.MeshFactory.createTriangle=function(e){var c=new h.MeshData({name:"Triangle",vertex:[0,1,0,-0.866025403784439,-0.5,0,0.866025403784439,-0.5,0],uv1:[0,1,-0.866025403784439,-0.5,0.866025403784439,-0.5],normal:[0,0,1,0,0,1,0,0,1],indices:[0,1,2]});return new h.Mesh(e,{name:"Triangle"},c)};e.MeshFactory.createPlane=function(e){var c=new h.MeshData({name:"Plane",
vertex:[1,-1,0,1,1,0,-1,-1,0,-1,1,0],uv1:[1,0,1,1,0,0,0,1],normal:[0,0,1,0,0,1,0,0,1,0,0,1],indices:[0,1,2,2,1,3]});return new h.Mesh(e,{name:"Plane"},c)};e.MeshFactory.createUVSphere=function(e,c,f,a){if(!c||c<3)c=20;if(!f||f<2)f=10;a||(a=1);for(var b=f*(c+1)*2+2*(f-1),d={},j=m.array(b,d),v={},k=m.array(b,v),i={},b=p.array(b,i),r=[],l=Math.PI/f,t=Math.PI/2,s=Math.PI*2,o=0,w=0;w<f;w++)for(var u=l*w-t,q=l*(w+1)-t,G=Math.sin(u),u=Math.cos(u),E=Math.sin(q),q=Math.cos(q),x=0;x<=c;x++){var y=s/c*x,D=Math.sin(y),
A=Math.cos(y),y=A*u,B=G,z=D*u;A*=q;var C=E;D*=q;m.set([y,B,z],j[o]);p.set([1-x/c,w/f],b[o]);m.set([a*y,a*B,a*z],k[o]);r.push(o);w>0&&x==0&&r.push(o);o++;m.set([A,C,D],j[o]);p.set([1-x/c,(w+1)/f],b[o]);m.set([a*A,a*C,a*D],k[o]);r.push(o);x==c&&w<f-1&&r.push(o);o++}c=new h.MeshData({name:"UVSphere",vertex:v.mem,uv1:i.mem,normal:d.mem,indices:r,meshType:5});return new h.Mesh(e,{name:"UVSphere"},c)};e.MeshFactory.createCube=function(e,c){c||(c=1);var f=new h.MeshData({name:"Cube",vertex:[c,c,c,-c,c,c,
-c,-c,c,c,-c,c,c,c,c,c,-c,c,c,-c,-c,c,c,-c,c,c,c,c,c,-c,-c,c,-c,-c,c,c,-c,c,c,-c,c,-c,-c,-c,-c,-c,-c,c,-c,-c,-c,c,-c,-c,c,-c,c,-c,-c,c,c,-c,-c,-c,-c,-c,-c,c,-c,c,c,-c],uv1:[1,1,0,1,0,0,1,0,0,1,0,0,1,0,1,1,1,0,1,1,0,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,0,0,1,0,1,1,0,1],normal:[0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1],color:[1,1,1,1,1,1,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,0,1,1,0,1,
1,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,0,0,1,1,0,0,1,0,0,0,1,0,0,1,1,1,0,1,1,1,0,0,1,0,0,1,1,0,0,0,1,0,1,0,1,0,1,1,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]});return new h.Mesh(e,{name:"Cube"},f)}})();
