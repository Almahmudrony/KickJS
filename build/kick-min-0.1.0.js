/*!
 * New BSD License
 *
 * Copyright (c) 2011, Morten Nobel-Joergensen, Kickstart Games ( http://www.kickstartgames.com/ )
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without modification, are permitted provided that the
 * following conditions are met:
 *
 * - Redistributions of source code must retain the above copyright notice, this list of conditions and the following
 * disclaimer.
 * - Redistributions in binary form must reproduce the above copyright notice, this list of conditions and the following
 * disclaimer in the documentation and/or other materials provided with the distribution.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES,
 * INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR
 * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY,
 * WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * -----
 * KICK.math is based on
 * glMatrix.js - High performance matrix and vector operations for WebGL
 * http://code.google.com/p/glmatrix/
 * version 0.9.6
 *
 * Copyright (c) 2011 Brandon Jones
 *
 * This software is provided 'as-is', without any express or implied
 * warranty. In no event will the authors be held liable for any damages
 * arising from the use of this software.
 *
 * Permission is granted to anyone to use this software for any purpose,
 * including commercial applications, and to alter it and redistribute it
 * freely, subject to the following restrictions:
 *
 *    1. The origin of this software must not be misrepresented; you must not
 *    claim that you wrote the original software. If you use this software
 *    in a product, an acknowledgment in the product documentation would be
 *    appreciated but is not required.
 *
 *    2. Altered source versions must be plainly marked as such, and must not
 *    be misrepresented as being the original software.
 *
 *    3. This notice may not be removed or altered from any source
 *    distribution.
 */
 'use strict';var KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,g;e[0]==="KICK"&&(e=e.slice(1));for(g=0;g<e.length;g+=1)typeof h[e[g]]==="undefined"&&(h[e[g]]={}),h=h[e[g]];return h};
(function(){var e=KICK.namespace("KICK.core");e.Constants={};Object.defineProperties(e.Constants,{_ASSERT:{value:!0,enumerable:!0},_DEBUG:{value:!0,enumerable:!0},_DEGREE_TO_RADIAN:{value:0.01745329251994,enumerable:!0},_RADIAN_TO_DEGREE:{value:57.2957795130824,enumerable:!0},_EPSILON:{value:1.0E-5,enumerable:!0},_LIGHT_TYPE_AMBIENT:{value:1,enumerable:!0},_LIGHT_TYPE_DIRECTIONAL:{value:2,enumerable:!0},_LIGHT_TYPE_POINT:{value:3,enumerable:!0},GL_DEPTH_BUFFER_BIT:{value:256,enumerable:!0},GL_STENCIL_BUFFER_BIT:{value:1024,
enumerable:!0},GL_COLOR_BUFFER_BIT:{value:16384,enumerable:!0},GL_POINTS:{value:0,enumerable:!0},GL_LINES:{value:1,enumerable:!0},GL_LINE_LOOP:{value:2,enumerable:!0},GL_LINE_STRIP:{value:3,enumerable:!0},GL_TRIANGLES:{value:4,enumerable:!0},GL_TRIANGLE_STRIP:{value:5,enumerable:!0},GL_TRIANGLE_FAN:{value:6,enumerable:!0},GL_ZERO:{value:0,enumerable:!0},GL_ONE:{value:1,enumerable:!0},GL_SRC_COLOR:{value:768,enumerable:!0},GL_ONE_MINUS_SRC_COLOR:{value:769,enumerable:!0},GL_SRC_ALPHA:{value:770,enumerable:!0},
GL_ONE_MINUS_SRC_ALPHA:{value:771,enumerable:!0},GL_DST_ALPHA:{value:772,enumerable:!0},GL_ONE_MINUS_DST_ALPHA:{value:773,enumerable:!0},GL_DST_COLOR:{value:774,enumerable:!0},GL_ONE_MINUS_DST_COLOR:{value:775,enumerable:!0},GL_SRC_ALPHA_SATURATE:{value:776,enumerable:!0},GL_FUNC_ADD:{value:32774,enumerable:!0},GL_BLEND_EQUATION:{value:32777,enumerable:!0},GL_BLEND_EQUATION_RGB:{value:32777,enumerable:!0},GL_BLEND_EQUATION_ALPHA:{value:34877,enumerable:!0},GL_FUNC_SUBTRACT:{value:32778,enumerable:!0},
GL_FUNC_REVERSE_SUBTRACT:{value:32779,enumerable:!0},GL_BLEND_DST_RGB:{value:32968,enumerable:!0},GL_BLEND_SRC_RGB:{value:32969,enumerable:!0},GL_BLEND_DST_ALPHA:{value:32970,enumerable:!0},GL_BLEND_SRC_ALPHA:{value:32971,enumerable:!0},GL_CONSTANT_COLOR:{value:32769,enumerable:!0},GL_ONE_MINUS_CONSTANT_COLOR:{value:32770,enumerable:!0},GL_CONSTANT_ALPHA:{value:32771,enumerable:!0},GL_ONE_MINUS_CONSTANT_ALPHA:{value:32772,enumerable:!0},GL_BLEND_COLOR:{value:32773,enumerable:!0},GL_ARRAY_BUFFER:{value:34962,
enumerable:!0},GL_ELEMENT_ARRAY_BUFFER:{value:34963,enumerable:!0},GL_ARRAY_BUFFER_BINDING:{value:34964,enumerable:!0},GL_ELEMENT_ARRAY_BUFFER_BINDING:{value:34965,enumerable:!0},GL_STREAM_DRAW:{value:35040,enumerable:!0},GL_STATIC_DRAW:{value:35044,enumerable:!0},GL_DYNAMIC_DRAW:{value:35048,enumerable:!0},GL_BUFFER_SIZE:{value:34660,enumerable:!0},GL_BUFFER_USAGE:{value:34661,enumerable:!0},GL_CURRENT_VERTEX_ATTRIB:{value:34342,enumerable:!0},GL_FRONT:{value:1028,enumerable:!0},GL_BACK:{value:1029,
enumerable:!0},GL_FRONT_AND_BACK:{value:1032,enumerable:!0},GL_TEXTURE_2D:{value:3553,enumerable:!0},GL_CULL_FACE:{value:2884,enumerable:!0},GL_BLEND:{value:3042,enumerable:!0},GL_DITHER:{value:3024,enumerable:!0},GL_STENCIL_TEST:{value:2960,enumerable:!0},GL_DEPTH_TEST:{value:2929,enumerable:!0},GL_SCISSOR_TEST:{value:3089,enumerable:!0},GL_POLYGON_OFFSET_FILL:{value:32823,enumerable:!0},GL_SAMPLE_ALPHA_TO_COVERAGE:{value:32926,enumerable:!0},GL_SAMPLE_COVERAGE:{value:32928,enumerable:!0},GL_NO_ERROR:{value:0,
enumerable:!0},GL_INVALID_ENUM:{value:1280,enumerable:!0},GL_INVALID_VALUE:{value:1281,enumerable:!0},GL_INVALID_OPERATION:{value:1282,enumerable:!0},GL_OUT_OF_MEMORY:{value:1285,enumerable:!0},GL_CW:{value:2304,enumerable:!0},GL_CCW:{value:2305,enumerable:!0},GL_LINE_WIDTH:{value:2849,enumerable:!0},GL_ALIASED_POINT_SIZE_RANGE:{value:33901,enumerable:!0},GL_ALIASED_LINE_WIDTH_RANGE:{value:33902,enumerable:!0},GL_CULL_FACE_MODE:{value:2885,enumerable:!0},GL_FRONT_FACE:{value:2886,enumerable:!0},GL_DEPTH_RANGE:{value:2928,
enumerable:!0},GL_DEPTH_WRITEMASK:{value:2930,enumerable:!0},GL_DEPTH_CLEAR_VALUE:{value:2931,enumerable:!0},GL_DEPTH_FUNC:{value:2932,enumerable:!0},GL_STENCIL_CLEAR_VALUE:{value:2961,enumerable:!0},GL_STENCIL_FUNC:{value:2962,enumerable:!0},GL_STENCIL_FAIL:{value:2964,enumerable:!0},GL_STENCIL_PASS_DEPTH_FAIL:{value:2965,enumerable:!0},GL_STENCIL_PASS_DEPTH_PASS:{value:2966,enumerable:!0},GL_STENCIL_REF:{value:2967,enumerable:!0},GL_STENCIL_VALUE_MASK:{value:2963,enumerable:!0},GL_STENCIL_WRITEMASK:{value:2968,
enumerable:!0},GL_STENCIL_BACK_FUNC:{value:34816,enumerable:!0},GL_STENCIL_BACK_FAIL:{value:34817,enumerable:!0},GL_STENCIL_BACK_PASS_DEPTH_FAIL:{value:34818,enumerable:!0},GL_STENCIL_BACK_PASS_DEPTH_PASS:{value:34819,enumerable:!0},GL_STENCIL_BACK_REF:{value:36003,enumerable:!0},GL_STENCIL_BACK_VALUE_MASK:{value:36004,enumerable:!0},GL_STENCIL_BACK_WRITEMASK:{value:36005,enumerable:!0},GL_VIEWPORT:{value:2978,enumerable:!0},GL_SCISSOR_BOX:{value:3088,enumerable:!0},GL_COLOR_CLEAR_VALUE:{value:3106,
enumerable:!0},GL_COLOR_WRITEMASK:{value:3107,enumerable:!0},GL_UNPACK_ALIGNMENT:{value:3317,enumerable:!0},GL_PACK_ALIGNMENT:{value:3333,enumerable:!0},GL_MAX_TEXTURE_SIZE:{value:3379,enumerable:!0},GL_MAX_VIEWPORT_DIMS:{value:3386,enumerable:!0},GL_SUBPIXEL_BITS:{value:3408,enumerable:!0},GL_RED_BITS:{value:3410,enumerable:!0},GL_GREEN_BITS:{value:3411,enumerable:!0},GL_BLUE_BITS:{value:3412,enumerable:!0},GL_ALPHA_BITS:{value:3413,enumerable:!0},GL_DEPTH_BITS:{value:3414,enumerable:!0},GL_STENCIL_BITS:{value:3415,
enumerable:!0},GL_POLYGON_OFFSET_UNITS:{value:10752,enumerable:!0},GL_POLYGON_OFFSET_FACTOR:{value:32824,enumerable:!0},GL_TEXTURE_BINDING_2D:{value:32873,enumerable:!0},GL_SAMPLE_BUFFERS:{value:32936,enumerable:!0},GL_SAMPLES:{value:32937,enumerable:!0},GL_SAMPLE_COVERAGE_VALUE:{value:32938,enumerable:!0},GL_SAMPLE_COVERAGE_INVERT:{value:32939,enumerable:!0},GL_NUM_COMPRESSED_TEXTURE_FORMATS:{value:34466,enumerable:!0},GL_COMPRESSED_TEXTURE_FORMATS:{value:34467,enumerable:!0},GL_DONT_CARE:{value:4352,
enumerable:!0},GL_FASTEST:{value:4353,enumerable:!0},GL_NICEST:{value:4354,enumerable:!0},GL_GENERATE_MIPMAP_HINT:{value:33170,enumerable:!0},GL_BYTE:{value:5120,enumerable:!0},GL_UNSIGNED_BYTE:{value:5121,enumerable:!0},GL_SHORT:{value:5122,enumerable:!0},GL_UNSIGNED_SHORT:{value:5123,enumerable:!0},GL_INT:{value:5124,enumerable:!0},GL_UNSIGNED_INT:{value:5125,enumerable:!0},GL_FLOAT:{value:5126,enumerable:!0},GL_DEPTH_COMPONENT:{value:6402,enumerable:!0},GL_ALPHA:{value:6406,enumerable:!0},GL_RGB:{value:6407,
enumerable:!0},GL_RGBA:{value:6408,enumerable:!0},GL_LUMINANCE:{value:6409,enumerable:!0},GL_LUMINANCE_ALPHA:{value:6410,enumerable:!0},GL_UNSIGNED_SHORT_4_4_4_4:{value:32819,enumerable:!0},GL_UNSIGNED_SHORT_5_5_5_1:{value:32820,enumerable:!0},GL_UNSIGNED_SHORT_5_6_5:{value:33635,enumerable:!0},GL_FRAGMENT_SHADER:{value:35632,enumerable:!0},GL_VERTEX_SHADER:{value:35633,enumerable:!0},GL_MAX_VERTEX_ATTRIBS:{value:34921,enumerable:!0},GL_MAX_VERTEX_UNIFORM_VECTORS:{value:36347,enumerable:!0},GL_MAX_VARYING_VECTORS:{value:36348,
enumerable:!0},GL_MAX_COMBINED_TEXTURE_IMAGE_UNITS:{value:35661,enumerable:!0},GL_MAX_VERTEX_TEXTURE_IMAGE_UNITS:{value:35660,enumerable:!0},GL_MAX_TEXTURE_IMAGE_UNITS:{value:34930,enumerable:!0},GL_MAX_FRAGMENT_UNIFORM_VECTORS:{value:36349,enumerable:!0},GL_SHADER_TYPE:{value:35663,enumerable:!0},GL_DELETE_STATUS:{value:35712,enumerable:!0},GL_LINK_STATUS:{value:35714,enumerable:!0},GL_VALIDATE_STATUS:{value:35715,enumerable:!0},GL_ATTACHED_SHADERS:{value:35717,enumerable:!0},GL_ACTIVE_UNIFORMS:{value:35718,
enumerable:!0},GL_ACTIVE_ATTRIBUTES:{value:35721,enumerable:!0},GL_SHADING_LANGUAGE_VERSION:{value:35724,enumerable:!0},GL_CURRENT_PROGRAM:{value:35725,enumerable:!0},GL_NEVER:{value:512,enumerable:!0},GL_LESS:{value:513,enumerable:!0},GL_EQUAL:{value:514,enumerable:!0},GL_LEQUAL:{value:515,enumerable:!0},GL_GREATER:{value:516,enumerable:!0},GL_NOTEQUAL:{value:517,enumerable:!0},GL_GEQUAL:{value:518,enumerable:!0},GL_ALWAYS:{value:519,enumerable:!0},GL_KEEP:{value:7680,enumerable:!0},GL_REPLACE:{value:7681,
enumerable:!0},GL_INCR:{value:7682,enumerable:!0},GL_DECR:{value:7683,enumerable:!0},GL_INVERT:{value:5386,enumerable:!0},GL_INCR_WRAP:{value:34055,enumerable:!0},GL_DECR_WRAP:{value:34056,enumerable:!0},GL_VENDOR:{value:7936,enumerable:!0},GL_RENDERER:{value:7937,enumerable:!0},GL_VERSION:{value:7938,enumerable:!0},GL_NEAREST:{value:9728,enumerable:!0},GL_LINEAR:{value:9729,enumerable:!0},GL_NEAREST_MIPMAP_NEAREST:{value:9984,enumerable:!0},GL_LINEAR_MIPMAP_NEAREST:{value:9985,enumerable:!0},GL_NEAREST_MIPMAP_LINEAR:{value:9986,
enumerable:!0},GL_LINEAR_MIPMAP_LINEAR:{value:9987,enumerable:!0},GL_TEXTURE_MAG_FILTER:{value:10240,enumerable:!0},GL_TEXTURE_MIN_FILTER:{value:10241,enumerable:!0},GL_TEXTURE_WRAP_S:{value:10242,enumerable:!0},GL_TEXTURE_WRAP_T:{value:10243,enumerable:!0},GL_TEXTURE:{value:5890,enumerable:!0},GL_TEXTURE_CUBE_MAP:{value:34067,enumerable:!0},GL_TEXTURE_BINDING_CUBE_MAP:{value:34068,enumerable:!0},GL_TEXTURE_CUBE_MAP_POSITIVE_X:{value:34069,enumerable:!0},GL_TEXTURE_CUBE_MAP_NEGATIVE_X:{value:34070,
enumerable:!0},GL_TEXTURE_CUBE_MAP_POSITIVE_Y:{value:34071,enumerable:!0},GL_TEXTURE_CUBE_MAP_NEGATIVE_Y:{value:34072,enumerable:!0},GL_TEXTURE_CUBE_MAP_POSITIVE_Z:{value:34073,enumerable:!0},GL_TEXTURE_CUBE_MAP_NEGATIVE_Z:{value:34074,enumerable:!0},GL_MAX_CUBE_MAP_TEXTURE_SIZE:{value:34076,enumerable:!0},GL_TEXTURE0:{value:33984,enumerable:!0},GL_TEXTURE1:{value:33985,enumerable:!0},GL_TEXTURE2:{value:33986,enumerable:!0},GL_TEXTURE3:{value:33987,enumerable:!0},GL_TEXTURE4:{value:33988,enumerable:!0},
GL_TEXTURE5:{value:33989,enumerable:!0},GL_TEXTURE6:{value:33990,enumerable:!0},GL_TEXTURE7:{value:33991,enumerable:!0},GL_TEXTURE8:{value:33992,enumerable:!0},GL_TEXTURE9:{value:33993,enumerable:!0},GL_TEXTURE10:{value:33994,enumerable:!0},GL_TEXTURE11:{value:33995,enumerable:!0},GL_TEXTURE12:{value:33996,enumerable:!0},GL_TEXTURE13:{value:33997,enumerable:!0},GL_TEXTURE14:{value:33998,enumerable:!0},GL_TEXTURE15:{value:33999,enumerable:!0},GL_TEXTURE16:{value:34E3,enumerable:!0},GL_TEXTURE17:{value:34001,
enumerable:!0},GL_TEXTURE18:{value:34002,enumerable:!0},GL_TEXTURE19:{value:34003,enumerable:!0},GL_TEXTURE20:{value:34004,enumerable:!0},GL_TEXTURE21:{value:34005,enumerable:!0},GL_TEXTURE22:{value:34006,enumerable:!0},GL_TEXTURE23:{value:34007,enumerable:!0},GL_TEXTURE24:{value:34008,enumerable:!0},GL_TEXTURE25:{value:34009,enumerable:!0},GL_TEXTURE26:{value:34010,enumerable:!0},GL_TEXTURE27:{value:34011,enumerable:!0},GL_TEXTURE28:{value:34012,enumerable:!0},GL_TEXTURE29:{value:34013,enumerable:!0},
GL_TEXTURE30:{value:34014,enumerable:!0},GL_TEXTURE31:{value:34015,enumerable:!0},GL_ACTIVE_TEXTURE:{value:34016,enumerable:!0},GL_REPEAT:{value:10497,enumerable:!0},GL_CLAMP_TO_EDGE:{value:33071,enumerable:!0},GL_MIRRORED_REPEAT:{value:33648,enumerable:!0},GL_FLOAT_VEC2:{value:35664,enumerable:!0},GL_FLOAT_VEC3:{value:35665,enumerable:!0},GL_FLOAT_VEC4:{value:35666,enumerable:!0},GL_INT_VEC2:{value:35667,enumerable:!0},GL_INT_VEC3:{value:35668,enumerable:!0},GL_INT_VEC4:{value:35669,enumerable:!0},
GL_BOOL:{value:35670,enumerable:!0},GL_BOOL_VEC2:{value:35671,enumerable:!0},GL_BOOL_VEC3:{value:35672,enumerable:!0},GL_BOOL_VEC4:{value:35673,enumerable:!0},GL_FLOAT_MAT2:{value:35674,enumerable:!0},GL_FLOAT_MAT3:{value:35675,enumerable:!0},GL_FLOAT_MAT4:{value:35676,enumerable:!0},GL_SAMPLER_2D:{value:35678,enumerable:!0},GL_SAMPLER_CUBE:{value:35680,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_ENABLED:{value:34338,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_SIZE:{value:34339,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_STRIDE:{value:34340,
enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_TYPE:{value:34341,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_NORMALIZED:{value:34922,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_POINTER:{value:34373,enumerable:!0},GL_VERTEX_ATTRIB_ARRAY_BUFFER_BINDING:{value:34975,enumerable:!0},GL_COMPILE_STATUS:{value:35713,enumerable:!0},GL_SHADER_COMPILER:{value:36346,enumerable:!0},GL_LOW_FLOAT:{value:36336,enumerable:!0},GL_MEDIUM_FLOAT:{value:36337,enumerable:!0},GL_HIGH_FLOAT:{value:36338,enumerable:!0},GL_LOW_INT:{value:36339,
enumerable:!0},GL_MEDIUM_INT:{value:36340,enumerable:!0},GL_HIGH_INT:{value:36341,enumerable:!0},GL_FRAMEBUFFER:{value:36160,enumerable:!0},GL_RENDERBUFFER:{value:36161,enumerable:!0},GL_RGBA4:{value:32854,enumerable:!0},GL_RGB5_A1:{value:32855,enumerable:!0},GL_RGB565:{value:36194,enumerable:!0},GL_DEPTH_COMPONENT16:{value:33189,enumerable:!0},GL_STENCIL_INDEX:{value:6401,enumerable:!0},GL_STENCIL_INDEX8:{value:36168,enumerable:!0},GL_DEPTH_STENCIL:{value:34041,enumerable:!0},GL_RENDERBUFFER_WIDTH:{value:36162,
enumerable:!0},GL_RENDERBUFFER_HEIGHT:{value:36163,enumerable:!0},GL_RENDERBUFFER_INTERNAL_FORMAT:{value:36164,enumerable:!0},GL_RENDERBUFFER_RED_SIZE:{value:36176,enumerable:!0},GL_RENDERBUFFER_GREEN_SIZE:{value:36177,enumerable:!0},GL_RENDERBUFFER_BLUE_SIZE:{value:36178,enumerable:!0},GL_RENDERBUFFER_ALPHA_SIZE:{value:36179,enumerable:!0},GL_RENDERBUFFER_DEPTH_SIZE:{value:36180,enumerable:!0},GL_RENDERBUFFER_STENCIL_SIZE:{value:36181,enumerable:!0},GL_FRAMEBUFFER_ATTACHMENT_OBJECT_TYPE:{value:36048,
enumerable:!0},GL_FRAMEBUFFER_ATTACHMENT_OBJECT_NAME:{value:36049,enumerable:!0},GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_LEVEL:{value:36050,enumerable:!0},GL_FRAMEBUFFER_ATTACHMENT_TEXTURE_CUBE_MAP_FACE:{value:36051,enumerable:!0},GL_COLOR_ATTACHMENT0:{value:36064,enumerable:!0},GL_DEPTH_ATTACHMENT:{value:36096,enumerable:!0},GL_STENCIL_ATTACHMENT:{value:36128,enumerable:!0},GL_DEPTH_STENCIL_ATTACHMENT:{value:33306,enumerable:!0},GL_NONE:{value:0,enumerable:!0},GL_FRAMEBUFFER_COMPLETE:{value:36053,enumerable:!0},
GL_FRAMEBUFFER_INCOMPLETE_ATTACHMENT:{value:36054,enumerable:!0},GL_FRAMEBUFFER_INCOMPLETE_MISSING_ATTACHMENT:{value:36055,enumerable:!0},GL_FRAMEBUFFER_INCOMPLETE_DIMENSIONS:{value:36057,enumerable:!0},GL_FRAMEBUFFER_UNSUPPORTED:{value:36061,enumerable:!0},GL_FRAMEBUFFER_BINDING:{value:36006,enumerable:!0},GL_RENDERBUFFER_BINDING:{value:36007,enumerable:!0},GL_MAX_RENDERBUFFER_SIZE:{value:34024,enumerable:!0},GL_INVALID_FRAMEBUFFER_OPERATION:{value:1286,enumerable:!0},GL_UNPACK_FLIP_Y_WEBGL:{value:37440,
enumerable:!0},GL_UNPACK_PREMULTIPLY_ALPHA_WEBGL:{value:37441,enumerable:!0},GL_CONTEXT_LOST_WEBGL:{value:37442,enumerable:!0},GL_UNPACK_COLORSPACE_CONVERSION_WEBGL:{value:37443,enumerable:!0},GL_BROWSER_DEFAULT_WEBGL:{value:37444,enumerable:!0}})})();this.exports=this.exports||{};exports.Constants=KICK.core.Constants;KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,g;e[0]==="KICK"&&(e=e.slice(1));for(g=0;g<e.length;g+=1)typeof h[e[g]]==="undefined"&&(h[e[g]]={}),h=h[e[g]];return h};
(function(){KICK.namespace("KICK.material").GLSLConstants={"default_fs.glsl":"#ifdef GL_ES\nprecision highp float;\n#endif\nvoid main(void)\n{\n    gl_FragColor = vec4(1.0,0.5, 0.9, 1.0);\n}","default_vs.glsl":"attribute vec3 vertex;\nuniform mat4 _mvProj;\nvoid main(void) {\n  gl_Position = _mvProj * vec4(vertex, 1.0);\n}  ","light.glsl":"struct DirectionalLight {\n   vec3 lDir;\n   vec3 colInt;\n   vec3 halfV;\n};\n// assumes that normal is normalized\nvoid getDirectionalLight(vec3 normal, DirectionalLight dLight, float specularExponent, out vec3 diffuse, out float specular){\n    float diffuseContribution = max(dot(normal, dLight.lDir), 0.0);\n\tfloat specularContribution = max(dot(normal, dLight.halfV), 0.0);\n    specular =  pow(specularContribution, specularExponent);\n\tdiffuse = (dLight.colInt * diffuseContribution);\n}\nuniform DirectionalLight _dLight;\nuniform vec3 _ambient;"}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,g;e[0]==="KICK"&&(e=e.slice(1));for(g=0;g<e.length;g+=1)typeof h[e[g]]==="undefined"&&(h[e[g]]={}),h=h[e[g]];return h};
(function(){var e=KICK.namespace("KICK.math"),h=KICK.namespace("KICK.math.vec2"),g=KICK.namespace("KICK.math.vec3"),l=KICK.namespace("KICK.math.vec4"),o=KICK.namespace("KICK.math.mat3"),f=KICK.namespace("KICK.math.mat4"),c=KICK.namespace("KICK.math.quat4"),q=function(a,b){var d,k=0,c=a.length/b,j=Array(c);for(d=0;d<c;d++,k+=b)j[d]=a.subarray(k,k+b);return j};e.vec2=h;h.wrapArray=function(a){return q(a,2)};h.array=function(a,b){var d=new Float32Array(a*2);if(b)b.mem=d;return h.wrapArray(d)};h.create=
function(a){var b=new Float32Array(2);a&&(b[0]=a[0],b[1]=a[1]);return b};h.set=function(a,b){b[0]=a[0];b[1]=a[1];return b};h.add=function(a,b,d){if(!d||a==d)return a[0]+=b[0],a[1]+=b[1],a;d[0]=a[0]+b[0];d[1]=a[1]+b[1];return d};h.subtract=function(a,b,d){if(!d||a==d)return a[0]-=b[0],a[1]-=b[1],a;d[0]=a[0]-b[0];d[1]=a[1]-b[1];return d};h.normalize=function(a,b){b||(b=a);var d=a[0],k=a[1],c=Math.sqrt(d*d+k*k);if(c){if(c==1)return b[0]=d,b[1]=k,b}else return b[0]=0,b[1]=0,b;c=1/c;b[0]=d*c;b[1]=k*c;
return b};e.vec3=g;g.wrapArray=function(a){return q(a,3)};g.array=function(a,b){var d=new Float32Array(a*3);if(b)b.mem=d;return g.wrapArray(d)};g.create=function(a){var b=new Float32Array(3);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2]);return b};g.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];return b};g.add=function(a,b,d){if(!d||a==d)return a[0]+=b[0],a[1]+=b[1],a[2]+=b[2],a;d[0]=a[0]+b[0];d[1]=a[1]+b[1];d[2]=a[2]+b[2];return d};g.subtract=function(a,b,d){if(!d||a==d)return a[0]-=b[0],a[1]-=b[1],a[2]-=
b[2],a;d[0]=a[0]-b[0];d[1]=a[1]-b[1];d[2]=a[2]-b[2];return d};g.multiply=function(a,b,d){if(!d||a==d)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a;d[0]=a[0]*b[0];d[1]=a[1]*b[1];d[2]=a[2]*b[2];return d};g.negate=function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];return b};g.scale=function(a,b,d){if(!d||a==d)return a[0]*=b,a[1]*=b,a[2]*=b,a;d[0]=a[0]*b;d[1]=a[1]*b;d[2]=a[2]*b;return d};g.normalize=function(a,b){b||(b=a);var d=a[0],k=a[1],c=a[2],j=Math.sqrt(d*d+k*k+c*c);if(j){if(j==1)return b[0]=d,
b[1]=k,b[2]=c,b}else return b[0]=0,b[1]=0,b[2]=0,b;j=1/j;b[0]=d*j;b[1]=k*j;b[2]=c*j;return b};g.cross=function(a,b,d){d||(d=a);var k=a[0],c=a[1],a=a[2],j=b[0],i=b[1],b=b[2];d[0]=c*b-a*i;d[1]=a*j-k*b;d[2]=k*i-c*j;return d};g.length=function(a){var b=a[0],d=a[1],a=a[2];return Math.sqrt(b*b+d*d+a*a)};g.lengthSqr=function(a){var b=a[0],d=a[1],a=a[2];return b*b+d*d+a*a};g.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};g.direction=function(a,b,d){d||(d=a);var k=a[0]-b[0],c=a[1]-b[1],a=a[2]-b[2],
b=Math.sqrt(k*k+c*c+a*a);if(!b)return d[0]=0,d[1]=0,d[2]=0,d;b=1/b;d[0]=k*b;d[1]=c*b;d[2]=a*b;return d};g.lerp=function(a,b,d,k){k||(k=a);k[0]=a[0]+d*(b[0]-a[0]);k[1]=a[1]+d*(b[1]-a[1]);k[2]=a[2]+d*(b[2]-a[2]);return k};g.sphericalToCarterian=function(a,b){var d=a[0],k=-a[1],c=a[2],j=d*Math.cos(c);b||(b=g.create());b[0]=j*Math.cos(k);b[1]=d*Math.sin(c);b[2]=j*Math.sin(k);return b};g.cartesianToSpherical=function(a,b){var d=a[0],k=a[1],c=a[2],j;d==0&&(d=1.0E-5);b||(b=g.create());b[0]=j=Math.sqrt(d*
d+k*k+c*c);b[1]=-Math.atan(c/d);d<0&&(b[1]+=Math.PI);b[2]=Math.asin(k/j);return b};g.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+"]"};e.vec4=l;l.wrapArray=function(a){return q(a,4)};l.array=function(a,b){var d=new Float32Array(a*4);if(b)b.mem=d;return l.wrapArray(d)};l.create=function(a){var b=new Float32Array(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b};l.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};l.add=function(a,b,d){if(!d||a==d)return a[0]+=b[0],a[1]+=
b[1],a[2]+=b[2],a[3]+=b[3],a;d[0]=a[0]+b[0];d[1]=a[1]+b[1];d[2]=a[2]+b[2];d[3]=a[3]+b[3];return d};l.subtract=function(a,b,d){if(!d||a==d)return a[0]-=b[0],a[1]-=b[1],a[2]-=b[2],a[3]-=b[3],a;d[0]=a[0]-b[0];d[1]=a[1]-b[1];d[2]=a[2]-b[2];d[3]=a[3]-b[3];return d};l.multiply=function(a,b,d){if(!d||a==d)return a[0]*=b[0],a[1]*=b[1],a[2]*=b[2],a[3]*=b[3],a;d[0]=a[0]*b[0];d[1]=a[1]*b[1];d[2]=a[2]*b[2];d[3]=a[3]*b[3];return d};l.negate=function(a,b){b||(b=a);b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=-a[3];return b};
l.scale=function(a,b,d){if(!d||a==d)return a[0]*=b,a[1]*=b,a[2]*=b,a[3]*=b,a;d[0]=a[0]*b;d[1]=a[1]*b;d[2]=a[2]*b;d[3]=a[2]*b;return d};l.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"};e.mat3=o;o.create=function(a){var b=new Float32Array(9);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8]);return b};o.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};o.identity=function(a){a[0]=
1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a};o.transpose=function(a,b){if(!b||a==b){var d=a[1],k=a[2],c=a[5];a[1]=a[3];a[2]=a[6];a[3]=d;a[5]=a[7];a[6]=k;a[7]=c;return a}b[0]=a[0];b[1]=a[3];b[2]=a[6];b[3]=a[1];b[4]=a[4];b[5]=a[7];b[6]=a[2];b[7]=a[5];b[8]=a[8];return b};o.toMat4=function(a,b){b||(b=f.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=0;b[4]=a[3];b[5]=a[4];b[6]=a[5];b[7]=0;b[8]=a[6];b[9]=a[7];b[10]=a[8];b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};o.str=function(a){return"["+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+"]"};o.strPretty=function(a){return"["+a[0]+", "+a[3]+", "+a[6]+"\n, "+a[1]+", "+a[4]+", "+a[7]+"\n, "+a[2]+", "+a[5]+", "+a[8]+"]"};e.mat4=f;f.create=function(a){var b=new Float32Array(16);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};f.set=function(a,b){b[0]=a[0];b[1]=a[1];
b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};f.setTRS=function(a,b,d,k){k||(k=f.create());f.identity(k);f.translate(k,a);f.multiply(k,c.toMat4(b));f.scale(k,d);return k};f.setTRSInverse=function(a,b,d,k){k||(k=f.create());f.identity(k);f.scale(k,[1/d[0],1/d[1],1/d[2]]);f.multiply(k,c.toMat4(c.inverse(b)));f.translate(k,[-a[0],-a[1],-a[2]]);return k};f.identity=function(a){a[0]=1;a[1]=
0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};f.transpose=function(a,b){if(!b||a==b){var d=a[1],k=a[2],c=a[3],j=a[6],i=a[7],f=a[11];a[1]=a[4];a[2]=a[8];a[3]=a[12];a[4]=d;a[6]=a[9];a[7]=a[13];a[8]=k;a[9]=j;a[11]=a[14];a[12]=c;a[13]=i;a[14]=f;return a}b[0]=a[0];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=a[1];b[5]=a[5];b[6]=a[9];b[7]=a[13];b[8]=a[2];b[9]=a[6];b[10]=a[10];b[11]=a[14];b[12]=a[3];b[13]=a[7];b[14]=a[11];b[15]=a[15];return b};
f.determinant=function(a){var b=a[0],d=a[1],k=a[2],c=a[3],j=a[4],i=a[5],f=a[6],m=a[7],e=a[8],g=a[9],n=a[10],h=a[11],l=a[12],p=a[13],q=a[14],a=a[15];return l*g*f*c-e*p*f*c-l*i*n*c+j*p*n*c+e*i*q*c-j*g*q*c-l*g*k*m+e*p*k*m+l*d*n*m-b*p*n*m-e*d*q*m+b*g*q*m+l*i*k*h-j*p*k*h-l*d*f*h+b*p*f*h+j*d*q*h-b*i*q*h-e*i*k*a+j*g*k*a+e*d*f*a-b*g*f*a-j*d*n*a+b*i*n*a};f.inverse=function(a,b){b||(b=a);var d=a[0],k=a[1],c=a[2],j=a[3],i=a[4],f=a[5],m=a[6],e=a[7],g=a[8],n=a[9],h=a[10],l=a[11],p=a[12],q=a[13],o=a[14],v=a[15],
y=d*f-k*i,B=d*m-c*i,z=d*e-j*i,A=k*m-c*f,E=k*e-j*f,F=c*e-j*m,G=g*q-n*p,H=g*o-h*p,I=g*v-l*p,K=n*o-h*q,L=n*v-l*q,M=h*v-l*o,C=1/(y*M-B*L+z*K+A*I-E*H+F*G);b[0]=(f*M-m*L+e*K)*C;b[1]=(-k*M+c*L-j*K)*C;b[2]=(q*F-o*E+v*A)*C;b[3]=(-n*F+h*E-l*A)*C;b[4]=(-i*M+m*I-e*H)*C;b[5]=(d*M-c*I+j*H)*C;b[6]=(-p*F+o*z-v*B)*C;b[7]=(g*F-h*z+l*B)*C;b[8]=(i*L-f*I+e*G)*C;b[9]=(-d*L+k*I-j*G)*C;b[10]=(p*E-q*z+v*y)*C;b[11]=(-g*E+n*z-l*y)*C;b[12]=(-i*K+f*H-m*G)*C;b[13]=(d*K-k*H+c*G)*C;b[14]=(-p*A+q*B-o*y)*C;b[15]=(g*A-n*B+h*y)*C;return b};
f.toRotationMat=function(a,b){b||(b=f.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};f.toMat3=function(a,b){b||(b=o.create());b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[4];b[4]=a[5];b[5]=a[6];b[6]=a[8];b[7]=a[9];b[8]=a[10];return b};f.toNormalMat3=function(a,b){var d=a[0],k=a[1],c=a[2],j=a[4],i=a[5],f=a[6],m=a[8],e=a[9],g=a[10],n=g*i-f*e,h=-g*j+f*m,l=e*j-i*m,p=d*n+k*h+c*l;if(!p)return null;
p=1/p;b||(b=o.create());b[0]=n*p;b[3]=(-g*k+c*e)*p;b[6]=(f*k-c*i)*p;b[1]=h*p;b[4]=(g*d-c*m)*p;b[7]=(-f*d+c*j)*p;b[2]=l*p;b[5]=(-e*d+k*m)*p;b[8]=(i*d-k*j)*p;return b};f.toInverseMat3=function(a,b){var d=a[0],k=a[1],c=a[2],j=a[4],i=a[5],f=a[6],m=a[8],e=a[9],g=a[10],n=g*i-f*e,h=-g*j+f*m,l=e*j-i*m,p=d*n+k*h+c*l;if(!p)return null;p=1/p;b||(b=o.create());b[0]=n*p;b[1]=(-g*k+c*e)*p;b[2]=(f*k-c*i)*p;b[3]=h*p;b[4]=(g*d-c*m)*p;b[5]=(-f*d+c*j)*p;b[6]=l*p;b[7]=(-e*d+k*m)*p;b[8]=(i*d-k*j)*p;return b};f.multiply=
function(a,b,d){d||(d=a);var k=a[0],c=a[1],j=a[2],i=a[3],f=a[4],m=a[5],e=a[6],g=a[7],n=a[8],h=a[9],l=a[10],p=a[11],q=a[12],o=a[13],v=a[14],a=a[15],y=b[0],B=b[1],z=b[2],A=b[3],E=b[4],F=b[5],G=b[6],H=b[7],I=b[8],K=b[9],L=b[10],M=b[11],C=b[12],N=b[13],O=b[14],b=b[15];d[0]=y*k+B*f+z*n+A*q;d[1]=y*c+B*m+z*h+A*o;d[2]=y*j+B*e+z*l+A*v;d[3]=y*i+B*g+z*p+A*a;d[4]=E*k+F*f+G*n+H*q;d[5]=E*c+F*m+G*h+H*o;d[6]=E*j+F*e+G*l+H*v;d[7]=E*i+F*g+G*p+H*a;d[8]=I*k+K*f+L*n+M*q;d[9]=I*c+K*m+L*h+M*o;d[10]=I*j+K*e+L*l+M*v;d[11]=
I*i+K*g+L*p+M*a;d[12]=C*k+N*f+O*n+b*q;d[13]=C*c+N*m+O*h+b*o;d[14]=C*j+N*e+O*l+b*v;d[15]=C*i+N*g+O*p+b*a;return d};f.multiplyVec3=function(a,b,d){d||(d=b);var k=b[0],c=b[1],b=b[2];d[0]=a[0]*k+a[4]*c+a[8]*b+a[12];d[1]=a[1]*k+a[5]*c+a[9]*b+a[13];d[2]=a[2]*k+a[6]*c+a[10]*b+a[14];return d};f.multiplyVec4=function(a,b,d){d||(d=b);var c=b[0],f=b[1],j=b[2],b=b[3];d[0]=a[0]*c+a[4]*f+a[8]*j+a[12]*b;d[1]=a[1]*c+a[5]*f+a[9]*j+a[13]*b;d[2]=a[2]*c+a[6]*f+a[10]*j+a[14]*b;d[3]=a[3]*c+a[7]*f+a[11]*j+a[15]*b;return d};
f.translate=function(a,b,d){var c=b[0],f=b[1],b=b[2];if(!d||a==d)return a[12]=a[0]*c+a[4]*f+a[8]*b+a[12],a[13]=a[1]*c+a[5]*f+a[9]*b+a[13],a[14]=a[2]*c+a[6]*f+a[10]*b+a[14],a[15]=a[3]*c+a[7]*f+a[11]*b+a[15],a;var j=a[0],i=a[1],e=a[2],m=a[3],g=a[4],h=a[5],n=a[6],l=a[7],q=a[8],p=a[9],o=a[10],D=a[11];d[0]=j;d[1]=i;d[2]=e;d[3]=m;d[4]=g;d[5]=h;d[6]=n;d[7]=l;d[8]=q;d[9]=p;d[10]=o;d[11]=D;d[12]=j*c+g*f+q*b+a[12];d[13]=i*c+h*f+p*b+a[13];d[14]=e*c+n*f+o*b+a[14];d[15]=m*c+l*f+D*b+a[15];return d};f.scale=function(a,
b,d){var c=b[0],f=b[1],b=b[2];if(!d||a==d)return a[0]*=c,a[1]*=c,a[2]*=c,a[3]*=c,a[4]*=f,a[5]*=f,a[6]*=f,a[7]*=f,a[8]*=b,a[9]*=b,a[10]*=b,a[11]*=b,a;d[0]=a[0]*c;d[1]=a[1]*c;d[2]=a[2]*c;d[3]=a[3]*c;d[4]=a[4]*f;d[5]=a[5]*f;d[6]=a[6]*f;d[7]=a[7]*f;d[8]=a[8]*b;d[9]=a[9]*b;d[10]=a[10]*b;d[11]=a[11]*b;d[12]=a[12];d[13]=a[13];d[14]=a[14];d[15]=a[15];return d};f.rotateEuler=function(a,b,d){d&&(f.set(a,d),a=d);b[2]!==0&&f.rotateZ(a,b[2]*0.01745329251994);b[1]!==0&&f.rotateY(a,b[1]*0.01745329251994);b[0]!==
0&&f.rotateX(a,b[0]*0.01745329251994);return a};f.rotate=function(a,b,d,c){var f=d[0],j=d[1],d=d[2],i=Math.sqrt(f*f+j*j+d*d);if(!i)return null;i!=1&&(i=1/i,f*=i,j*=i,d*=i);var e=Math.sin(b),m=Math.cos(b),g=1-m,b=a[0],i=a[1],h=a[2],n=a[3],l=a[4],q=a[5],p=a[6],o=a[7],D=a[8],v=a[9],y=a[10],B=a[11],z=f*f*g+m,A=j*f*g+d*e,E=d*f*g-j*e,F=f*j*g-d*e,G=j*j*g+m,H=d*j*g+f*e,I=f*d*g+j*e,f=j*d*g-f*e,j=d*d*g+m;c?a!=c&&(c[12]=a[12],c[13]=a[13],c[14]=a[14],c[15]=a[15]):c=a;c[0]=b*z+l*A+D*E;c[1]=i*z+q*A+v*E;c[2]=h*
z+p*A+y*E;c[3]=n*z+o*A+B*E;c[4]=b*F+l*G+D*H;c[5]=i*F+q*G+v*H;c[6]=h*F+p*G+y*H;c[7]=n*F+o*G+B*H;c[8]=b*I+l*f+D*j;c[9]=i*I+q*f+v*j;c[10]=h*I+p*f+y*j;c[11]=n*I+o*f+B*j;return c};f.rotateX=function(a,b,d){var c=Math.sin(b),b=Math.cos(b),f=a[4],j=a[5],i=a[6],e=a[7],m=a[8],g=a[9],h=a[10],n=a[11];d?a!=d&&(d[0]=a[0],d[1]=a[1],d[2]=a[2],d[3]=a[3],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[4]=f*b+m*c;d[5]=j*b+g*c;d[6]=i*b+h*c;d[7]=e*b+n*c;d[8]=f*-c+m*b;d[9]=j*-c+g*b;d[10]=i*-c+h*b;d[11]=e*-c+n*
b;return d};f.rotateY=function(a,b,d){var c=Math.sin(b),b=Math.cos(b),f=a[0],j=a[1],i=a[2],e=a[3],m=a[8],g=a[9],h=a[10],n=a[11];d?a!=d&&(d[4]=a[4],d[5]=a[5],d[6]=a[6],d[7]=a[7],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=f*b+m*-c;d[1]=j*b+g*-c;d[2]=i*b+h*-c;d[3]=e*b+n*-c;d[8]=f*c+m*b;d[9]=j*c+g*b;d[10]=i*c+h*b;d[11]=e*c+n*b;return d};f.rotateZ=function(a,b,d){var c=Math.sin(b),b=Math.cos(b),f=a[0],j=a[1],i=a[2],e=a[3],g=a[4],h=a[5],l=a[6],n=a[7];d?a!=d&&(d[8]=a[8],d[9]=a[9],d[10]=a[10],
d[11]=a[11],d[12]=a[12],d[13]=a[13],d[14]=a[14],d[15]=a[15]):d=a;d[0]=f*b+g*c;d[1]=j*b+h*c;d[2]=i*b+l*c;d[3]=e*b+n*c;d[4]=f*-c+g*b;d[5]=j*-c+h*b;d[6]=i*-c+l*b;d[7]=e*-c+n*b;return d};f.frustum=function(a,b,d,c,e,j,i){i||(i=f.create());var g=b-a,m=c-d,h=j-e;i[0]=e*2/g;i[1]=0;i[2]=0;i[3]=0;i[4]=0;i[5]=e*2/m;i[6]=0;i[7]=0;i[8]=(b+a)/g;i[9]=(c+d)/m;i[10]=-(j+e)/h;i[11]=-1;i[12]=0;i[13]=0;i[14]=-(j*e*2)/h;i[15]=0;return i};f.perspective=function(a,b,d,c,e){a=d*Math.tan(a*Math.PI/360);b*=a;return f.frustum(-b,
b,-a,a,d,c,e)};f.ortho=function(a,b,d,c,e,j,i){i||(i=f.create());var g=b-a,m=c-d,h=j-e;i[0]=2/g;i[1]=0;i[2]=0;i[3]=0;i[4]=0;i[5]=2/m;i[6]=0;i[7]=0;i[8]=0;i[9]=0;i[10]=-2/h;i[11]=0;i[12]=-(a+b)/g;i[13]=-(c+d)/m;i[14]=-(j+e)/h;i[15]=1;return i};f.lookAt=function(a,b,d,c){c||(c=f.create());var e=a[0],j=a[1],a=a[2],i=d[0],g=d[1],m=d[2],d=b[1],h=b[2];if(e==b[0]&&j==d&&a==h)return f.identity(c);var l,n,q,o,d=e-b[0],h=j-b[1],b=a-b[2];o=1/Math.sqrt(d*d+h*h+b*b);d*=o;h*=o;b*=o;l=g*b-m*h;m=m*d-i*b;i=i*h-g*
d;(o=Math.sqrt(l*l+m*m+i*i))?(o=1/o,l*=o,m*=o,i*=o):i=m=l=0;g=h*i-b*m;n=b*l-d*i;q=d*m-h*l;(o=Math.sqrt(g*g+n*n+q*q))?(o=1/o,g*=o,n*=o,q*=o):q=n=g=0;c[0]=l;c[1]=g;c[2]=d;c[3]=0;c[4]=m;c[5]=n;c[6]=h;c[7]=0;c[8]=i;c[9]=q;c[10]=b;c[11]=0;c[12]=-(l*e+m*j+i*a);c[13]=-(g*e+n*j+q*a);c[14]=-(d*e+h*j+b*a);c[15]=1;return c};f.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+
"]"};f.strPretty=function(a){return"["+a[0]+", "+a[4]+", "+a[8]+", "+a[12]+"\n, "+a[1]+", "+a[5]+", "+a[9]+", "+a[13]+"\n, "+a[2]+", "+a[6]+", "+a[10]+", "+a[14]+"\n, "+a[3]+", "+a[7]+", "+a[11]+", "+a[15]+"]"};e.quat4=c;c.create=function(a){var b=new Float32Array(4);a&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3]);return b};c.set=function(a,b){b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b};c.calculateW=function(a,b){var d=a[0],c=a[1],f=a[2];if(!b||a==b)return a[3]=-Math.sqrt(Math.abs(1-d*d-c*c-f*
f)),a;b[0]=d;b[1]=c;b[2]=f;b[3]=-Math.sqrt(Math.abs(1-d*d-c*c-f*f));return b};c.inverse=function(a,b){if(!b||a==b)return a[0]*=-1,a[1]*=-1,a[2]*=-1,a;b[0]=-a[0];b[1]=-a[1];b[2]=-a[2];b[3]=a[3];return b};c.length=function(a){var b=a[0],d=a[1],c=a[2],a=a[3];return Math.sqrt(b*b+d*d+c*c+a*a)};c.normalize=function(a,b){b||(b=a);var d=a[0],c=a[1],f=a[2],e=a[3],i=Math.sqrt(d*d+c*c+f*f+e*e);if(i==0)return b[0]=0,b[1]=0,b[2]=0,b[3]=0,b;i=1/i;b[0]=d*i;b[1]=c*i;b[2]=f*i;b[3]=e*i;return b};c.multiply=function(a,
b,d){d||(d=a);var c=a[0],f=a[1],e=a[2],a=a[3],i=b[0],g=b[1],h=b[2],b=b[3];d[0]=c*b+a*i+f*h-e*g;d[1]=f*b+a*g+e*i-c*h;d[2]=e*b+a*h+c*g-f*i;d[3]=a*b-c*i-f*g-e*h;return d};c.multiplyVec3=function(a,b,d){d||(d=b);var c=b[0],f=b[1],e=b[2],b=a[0],i=a[1],g=a[2],a=a[3],h=a*c+i*e-g*f,l=a*f+g*c-b*e,o=a*e+b*f-i*c,c=-b*c-i*f-g*e;d[0]=h*a+c*-b+l*-g-o*-i;d[1]=l*a+c*-i+o*-b-h*-g;d[2]=o*a+c*-g+h*-i-l*-b;return d};c.identity=function(a){a||(a=c.create());a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};c.toEuler=function(a,b){var d=
a[0],c=a[1],f=a[2],e=a[3],i=c*c;b||(b=g.create());b[0]=Math.atan2(2*(e*d+c*f),1-2*(d*d+i))*57.2957795130824;b[1]=Math.asin(2*(e*c-f*d))*57.2957795130824;b[2]=Math.atan2(2*(e*f+d*c),1-2*(i+f*f))*57.2957795130824;return b};c.angleAxis=function(a,b,d){a*=0.00872664625997;var f=Math.sin(a);d||(d=c.create());d[3]=Math.cos(a);d[2]=b[2]*f;d[1]=b[1]*f;d[0]=b[0]*f;return d};c.setEuler=function(a,b){var d=c.angleAxis(a[0],[1,0,0]),f=c.angleAxis(a[1],[0,1,0]),e=c.angleAxis(a[2],[0,0,1]);b||(b=c.create());c.multiply(e,
f,b);c.multiply(b,d,b);return b};c.toMat3=function(a,b){b||(b=o.create());var d=a[0],c=a[1],f=a[2],e=a[3],i=2*d,g=2*c,h=2*f,l=g*c,q=h*f;c*=i;h*=e;var n=i*f,u=g*e;d*=i;f*=g;e*=i;b[0]=1-l-q;b[1]=c+h;b[2]=n-u;b[3]=c-h;b[4]=1-d-q;b[5]=f+e;b[6]=n+u;b[7]=f-e;b[8]=1-d-l;return b};c.toMat4=function(a,b){b||(b=f.create());var d=a[0],c=a[1],e=a[2],g=a[3],i=2*d,h=2*c,m=2*e,l=h*c,o=m*e;c*=i;m*=g;var n=i*e,q=h*g;d*=i;e*=h;g*=i;b[0]=1-l-o;b[1]=c+m;b[2]=n-q;b[3]=0;b[4]=c-m;b[5]=1-d-o;b[6]=e+g;b[7]=0;b[8]=n+q;b[9]=
e-g;b[10]=1-d-l;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};c.slerp=function(a,b,c,f){f||(f=a);var e=a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3];if(Math.abs(e)>=1)return f!=a&&(f[0]=a[0],f[1]=a[1],f[2]=a[2],f[3]=a[3]),f;var g=Math.acos(e),i=Math.sqrt(1-e*e);if(Math.abs(i)<0.0010)return f[0]=a[0]*0.5+b[0]*0.5,f[1]=a[1]*0.5+b[1]*0.5,f[2]=a[2]*0.5+b[2]*0.5,f[3]=a[3]*0.5+b[3]*0.5,f;e=Math.sin((1-c)*g)/i;c=Math.sin(c*g)/i;f[0]=a[0]*e+b[0]*c;f[1]=a[1]*e+b[1]*c;f[2]=a[2]*e+b[2]*c;f[3]=a[3]*e+b[3]*c;return f};
c.difference=function(a,b,c){c||(c=a);var f=-a[0],e=-a[1],g=-a[2],a=a[3],i=b[0],h=b[1],m=b[2],b=b[3];c[0]=f*b+a*i+e*m-g*h;c[1]=e*b+a*h+g*i-f*m;c[2]=g*b+a*m+f*h-e*i;c[3]=a*b-f*i-e*h-g*m;return c};c.str=function(a){return"["+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+"]"}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,g;e[0]==="KICK"&&(e=e.slice(1));for(g=0;g<e.length;g+=1)typeof h[e[g]]==="undefined"&&(h[e[g]]={}),h=h[e[g]];return h};
(function(){var e=KICK.namespace("KICK.core"),h=KICK.namespace("KICK.scene"),g=KICK.namespace("KICK.renderer");e.Engine=function(l,o){var f=null,c=document.getElementById(l),q=["experimental-webgl","webgl"],a=this,b,d=(new Date).getTime()-16,k=0,s=new e.Time,j=0,i=0,t=[],m=null,w=new h.Scene(this),r=null,n=function(b){a._gameLoop(b)},u=1;Object.defineProperties(this,{gl:{get:function(){return f}},canvas:{value:c},activeScene:{get:function(){return w},set:function(a){w=a}},keyInput:{get:function(){m||
(m=new e.KeyInput,this.addFrameListener(m));return m}},renderer:{get:function(){return b},set:function(c){h.ComponentChangedListener.isComponentListener(b)&&this.activeScene.removeComponentListener(b);b=c;h.ComponentChangedListener.isComponentListener(b)&&this.activeScene.addComponentListener(b);b.init(a)}},time:{value:s},config:{value:new e.Config(o||{})}});this.pause=function(){r!==null&&(cancelRequestAnimFrame(r),r=null)};this.resume=function(){r===null&&(d=(new Date).getTime()-16,r=requestAnimationFrame(n,
this.canvas))};this._gameLoop=function(a){this.activeScene.update();this.renderer.render();for(var b=t.length-1;b>=0;b--)t[b].frameUpdated();k=a-d;d=a;j+=k;i+=1;r=requestAnimationFrame(n,this.canvas)};this.addFrameListener=function(a){typeof a.frameUpdated!=="function"&&KICK.core.Util.fail("frameListener must define the method frameUpdated");t.push(a)};this.removeFrameListener=function(a){return e.Util.removeElementFromArray(a)};this.createUID=function(){return u++};this.canvasResized=function(){f.viewportWidth=
c.width;f.viewportHeight=c.height};(function(){for(var b=q.length-1;b>=0;b--)try{if(f=c.getContext(q[b],{preserveDrawingBuffer:a.config.preserveDrawingBuffer}))break}catch(e){alert(e)}if(!f)throw{name:"Error",message:"Cannot create gl-context"};a.config.enableDebugContext&&(window.WebGLDebugUtils?f=WebGLDebugUtils.makeDebugContext(f):console.log("webgl-debug.js not included - cannot find WebGLDebugUtils"));a.canvasResized();a.config.checkCanvasResizeInterval&&setInterval(function(){(c.height!==f.viewportWidth||
c.width!==f.viewportHeight)&&a.canvasResized()},a.config.checkCanvasResizeInterval);a.renderer=new g.ForwardRenderer;f.clearColor(0,0,0,1);f.enable(2929);f.clear(16640);Object.defineProperties(s,{time:{get:function(){return j}},deltaTime:{get:function(){return k}},frameCount:{get:function(){return i}},avarageFramesPerSecond:{get:function(){return i/(j*0.0010)}}});Object.freeze(s);i=j=0;a._gameLoop(d)})()};e.Config=function(e){this.maxNumerOfLights=e.maxNumerOfLights?e.maxNumerOfLights:1;this.enableDebugContext=
typeof e.enableDebugContext==="boolean"?e.enableDebugContext:!1;this.preserveDrawingBuffer=e.preserveDrawingBuffer||!1;this.checkCanvasResizeInterval=e.checkCanvasResizeInterval||0};e.Time=function(){};e.KeyInput=function(){var g=[],h=[],f=[],c=e.Util.removeElementFromArray,q=e.Util.contains;this.isKeyDown=function(a){return q(g,a)};this.isKeyUp=function(a){return q(h,a)};this.isKey=function(a){return q(f,a)};this.frameUpdated=function(){g.length=0;h.length=0};document.addEventListener("keydown",
function(a){a=a.keyCode;q(f,a)||(g.push(a),f.push(a))},!1);document.addEventListener("keyup",function(a){a=a.keyCode;h.push(a);c(f,a)},!1)};e.Util={scaleImage:function(e,g,f){var c=document.createElement("canvas");c.width=g;c.height=f;c.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,c.width,c.height);return c},fail:function(e){debugger;console.error(e)},typedArrayToArray:function(e){for(var g=e.length,f=Array(g),c=0;c<g;c++)f[c]=e[c];return f},removeElementFromArray:function(e,g,f){for(var c=
!1,h=e.length-1;h>=0;h--)if(e[h]===g&&(c=!0,e.splice(h,1),!f))break;return c},removeElementsFromArray:function(e,g){var f,c;for(f=e.length-1;f>=0;f--)for(c=g.length-1;c>=0;c--)e[f]===g[c]&&e.splice(f,1)},insertSorted:function(e,g,f){var c;if(!f)f=this.numberSortFunction;for(c=g.length-1;c>=0;c--)if(f(g[c],e)<0){g.splice(c+1,0,e);return}g.unshift(e)},numberSortFunction:function(e,g){return e-g},contains:function(e,g){for(var f=e.length-1;f>=0;f--)if(e[f]===g)return!0;return!1}};Object.freeze(e.Util);
if(typeof window.requestAnimationFrame==="undefined")window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,16.7)}}(),window.cancelRequestAnimFrame=window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||
clearTimeout;if(typeof window.console==="undefined")window.console={};if(typeof window.console.log==="undefined")window.console.log=function(e){alert(e)}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,g;e[0]==="KICK"&&(e=e.slice(1));for(g=0;g<e.length;g+=1)typeof h[e[g]]==="undefined"&&(h[e[g]]={}),h=h[e[g]];return h};
(function(){var e=KICK.namespace("KICK.texture"),h=KICK.namespace("KICK.core");e.Texture=function(e,l,o){var f=e.gl,c=e.createUID(),e=l||{},q=f.createTexture(),a=e.wrapS||10497,b=e.wrapT||10497,d=e.minFilter||9729,k=e.magFilter||9729,s=typeof e.generateMipmaps==="boolean"?e.generateMipmaps:!0,j=typeof e.autoScaleImage==="boolean"?e.autoScaleImage:!0,i=e.dataURI||null,t=typeof e.flipY==="boolean"?e.flipY:!0,m=e.intformat||6408,w,r=function(a){--a;for(var b=1;b<32;b<<=1)a|=a>>b;return a+1};o&&e.uid&&
(o[e.uid]=c);if(!f.activeTexture)f.activeTexture={};w=f.activeTexture;this.bind=function(a){w[a]!==this&&(f.activeTexture(33984+a),f.bindTexture(3553,q),w[a]=this)};this.setImage=function(a,b){i=b;if((a.width&a.width-1)!=0||(a.height&a.height-1)!=0)var c=r(a.width),d=r(a.height),a=h.Util.scaleImage(a,c,d);this.bind(0);t?f.pixelStorei(37440,!0):f.pixelStorei(37440,!1);f.pixelStorei(3317,1);f.texImage2D(3553,0,m,m,5121,a);s&&f.generateMipmap(3553)};this.setImageData=function(a,b,c,d,e,g){d!==5121&&
d!==32819&&d!==32820&&d!==33635&&KICK.core.Util.fail("Texture.setImageData (type) should be either 5121, 32819, 32820 or 33635");i=g;this.bind(0);f.pixelStorei(3317,1);f.texImage2D(3553,0,m,a,b,c,m,d,e);s&&f.generateMipmap(3553)};this.setTemporaryTexture=function(){var a=new Uint8Array([255,255,255,0,0,0,0,0,0,255,255,255]),b=m;m=6407;this.setImageData(2,2,0,5121,a,"tempTexture");m=b};Object.defineProperties(this,{uid:{value:c},dataURI:{get:function(){return i}},wrapS:{get:function(){return a},set:function(b){b!==
33071&&b!==10497&&KICK.core.Util.fail("Texture.wrapS should be either 33071 or 10497");a=b}},wrapT:{get:function(){return b},set:function(a){a!==33071&&a!==10497&&KICK.core.Util.fail("Texture.wrapT should be either 33071 or 10497");return b}},minFilter:{get:function(){return d},set:function(a){a!==9728&&a!==9729&&a!==9984&&a!==9985&&a!==9986&&a!==9987&&KICK.core.Util.fail("Texture.minFilter should be either 9728, 9729, 9984, 9985, 9986, 9987");d=a}},magFilter:{get:function(){return k},set:function(a){a!==
9728&&a!==9729&&KICK.core.Util.fail("Texture.magFilter should be either 9728 or 9729");k=a}},autoScaleImage:{get:function(){return j},set:function(a){typeof a!=="boolean"&&KICK.core.Util.fail("Texture.autoScaleImage was not be a boolean");j=a}},generateMipmaps:{get:function(){return s},set:function(a){typeof a!=="boolean"&&KICK.core.Util.fail("Texture.generateMipmaps was not a boolean");s=a}},flipY:{get:function(){return t},set:function(a){typeof a!=="boolean"&&KICK.core.Util.fail("Texture.flipY was not a boolean");
t=a}},internalFormal:{get:function(){return m},set:function(a){a!==6406&&a!==6407&&a!==6408&&a!==6409&&a!==6410&&KICK.core.Util.fail("Texture.internalFormal should be either 6406, 6407, 6408, 6409, or LUMINANCE_ALPHA");m=a}}});this.toJSON=function(){return{uid:c,wrapS:a,wrapT:b,minFilter:d,magFilter:k,generateMipmaps:s,autoScaleImage:j,dataURI:i,flipY:t,internalFormal:m}}}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,g;e[0]==="KICK"&&(e=e.slice(1));for(g=0;g<e.length;g+=1)typeof h[e[g]]==="undefined"&&(h[e[g]]={}),h=h[e[g]];return h};
(function(){var e=KICK.namespace("KICK.scene"),h=KICK.namespace("KICK.core");KICK.namespace("KICK.math");var g=KICK.namespace("KICK.math.vec3"),l=KICK.namespace("KICK.math.quat4"),o=KICK.namespace("KICK.math.vec4"),f=KICK.namespace("KICK.math.mat4");e.GameObject=function(c){var e=[];Object.defineProperties(this,{scene:{value:c},engine:{value:c.engine},transform:{value:new KICK.scene.Transform(this)}});this.addComponent=function(a){if(a.gameObject)throw{name:"Error",message:"Component "+a+" already added to gameObject "+
a.gameObject};if(!a.scriptPriority)a.scriptPriority=0;a.gameObject=this;e.push(a);this.scene.addComponent(a)};this.removeComponent=function(a){delete a.gameObject;h.Util.removeElementFromArray(e,a);this.scene.removeComponent(a)};this.destroy=function(){var a;for(a=0;a<e.length;a++)this.removeComponent(e[a]);this.scene.destroyObject(this)};this.getComponentOfType=function(a){var b,d;for(d=e.length-1;d>=0;d--)if(b=e[d],b instanceof a)return b;return a===c.Transform?this.transform:null}};e.Transform=
function(c){var e=f.identity(f.create()),a=f.identity(f.create()),b=f.identity(f.create()),d=f.identity(f.create()),k=g.create([0,0,0]),s=g.create([0,0,0]),j=l.create([0,0,0,1]),i=l.create([0,0,0,1]),t=g.create([1,1,1]),m=new Int8Array(6),w=[],r=null,n=this,u=function(){var a;m[2]=1;m[3]=1;m[4]=1;m[5]=1;for(a=w.length-1;a>=0;a--)w[a]._markGlobalDirty()},x=function(){m[0]=1;m[1]=1;u()};Object.defineProperties(this,{gameObject:{value:c},position:{get:function(){if(r==null)return g.create(s);m[4]&&(f.multiplyVec3(this.getGlobalMatrix(),
[0,0,0],k),m[4]=0);return g.create(k)},set:function(a){var b;r==null?this.localPosition=a:(b=this.position,g.set(a,s),this.localPosition=[s[0]+b[0]-a[0],s[1]+b[1]-a[1],s[2]+b[2]-a[2]])}},localPosition:{get:function(){return g.create(s)},set:function(a){g.set(a,s);x()}},localRotationEuler:{get:function(){var a=g.create();l.toEuler(i,a);return a},set:function(a){l.setEuler(a,i);x()}},rotationEuler:{get:function(){var a=g.create();l.toEuler(this.rotation,a);return a},set:function(a){var b=l.create();
l.setEuler(a,b);this.rotation=b}},rotation:{get:function(){var a=null;if(r==null)return o.create(i);if(m[5]){l.set(i,j);for(a=this.parent;a!=null;)l.multiply(a.localRotation,j,j),a=a.parent;m[5]=!1}return j},set:function(a){if(r==null)this.localRotation=a;else{var b=l.create();l.difference(a,this.rotation,b);this.localRotation=l.multiply(i,b)}}},localRotation:{get:function(){return i},set:function(a){l.set(a,i);x()}},localScale:{get:function(){return g.create(t)},set:function(a){g.set(a,t);x()}},
children:{value:w},parent:{get:function(){return r},set:function(a){a===this&&KICK.core.Util.fail("Cannot assign parent to self");a===null?(r=null,h.Util.removeElementFromArray(a.children,this)):(r=a,a.children.push(this));u()}}});this.getLocalMatrix=function(){m[0]&&(f.setTRS(s,i,t,e),m[0]=0);return e};this.getLocalTRSInverse=function(){m[1]&&(f.setTRSInverse(s,i,t,b),m[1]=0);return b};this.getGlobalMatrix=function(){if(m[2]){f.set(n.getLocalMatrix(),a);for(var b=n.parent;b!==null;)f.multiply(a,
b.getLocalMatrix(),a),b=b.parent;m[2]=0}return a};this.getGlobalTRSInverse=function(){if(m[3]){f.set(n.getLocalTRSInverse(),d);for(var a=n.parent;a!==null;)f.multiply(d,a.getLocalTRSInverse(),d),a=a.parent;m[3]=0}return d};this._markGlobalDirty=u};e.Scene=function(c){var f=[],a=[],b=[],d=[],g=[],l=[],j=[],i=[],o=function(a,b){return a.scriptPriority-b.scriptPriority};this.addComponentListener=function(a){if(!e.ComponentChangedListener.isComponentListener(a))throw{name:"Error",message:"Component listener does not have the correct interface. It should contain the two functions: componentsAdded(components) and componentsRemoved(components)"};
i.push(a)};this.removeComponentListener=function(a){h.Util.removeElementFromArray(i,a)};this.addComponent=function(a){h.Util.insertSorted(a,l,o)};this.removeComponent=function(a){j.push(a)};Object.defineProperty(this,"engine",{value:c});this.loadScene=function(){throw Error("Not implemented");};this.saveScene=function(){throw Error("Not implemented");};this.createGameObject=function(){var b=new e.GameObject(this);a.push(b);return b};this.destroyObject=function(a){b.push(a)};this.getNumberOfGameObjects=
function(){return f.length};this.getGameObject=function(a){return f[a]};this.update=function(){var c;for(c=d.length-1;c>=0;c--)d[c].update();for(c=g.length-1;c>=0;c--)g[c].lateUpdate();var e;if(a.length>0)f=f.concat(a),a.length=0;if(b.length>0)h.Util.removeElementsFromArray(f,b),b.length=0;if(l.length>0){var r=l;l=[];for(c=r.length-1;c>=0;c--)e=r[c],typeof e.activated==="function"&&e.activated(),typeof e.update==="function"&&h.Util.insertSorted(e,d,o),typeof e.lateUpdate==="function"&&h.Util.insertSorted(e,
g,o);for(c=i.length-1;c>=0;c--)i[c].componentsAdded(r)}if(j.length>0){r=j;j=[];for(c=r.length-1;c>=0;c--)e=r[c],typeof e.deactivated==="function"&&e.deactivated(),typeof e.update==="function"&&h.Util.removeElementFromArray(d,e),typeof e.lateUpdate==="function"&&h.Util.removeElementFromArray(g,e);for(c=i.length-1;c>=0;c--)i[c].componentsRemoved(r)}};this.debug=function(){console.log("gameObjects "+f.length,f,"gameObjectsNew "+a.length,a,"gameObjectsDelete "+b.length,b)}};e.Camera=function(c){var e,
a=this,b,d=function(a){return typeof a==="number"};this.activated=function(){var a=this.gameObject;b=a.transform;e=a.engine.gl};this.setupCamera=function(c,d,g){e.viewport(0,0,e.viewportWidth,e.viewportHeight);if(e.currentClearColor!==a.clearColor){var i=e.currentClearColor=a.clearColor;e.clearColor(i[0],i[1],i[2],i[3])}if(!a._currentClearFlags)a._currentClearFlags=(a.clearFlagColor?16384:0)+(a.clearFlagDepth?256:0);e.clear(a._currentClearFlags);this.cameraTypePerspective?f.perspective(this.fieldOfView,
e.viewportWidth/e.viewportHeight,this.near,this.far,c):f.ortho(this.left,this.right,this.bottom,this.top,this.near,this.far,c);i=b.getGlobalTRSInverse();f.set(i,d);f.multiply(c,d,g)};this.fieldOfView=d(c.fieldOfView)?c.fieldOfView:60;this.near=d(c.near)?c.near:0.1;this.far=d(c.far)?c.far:1E3;this.cameraTypePerspective=typeof c.cameraTypePerspective==="boolean"?c.cameraType:!0;this.left=d(c.left)?c.left:-1;this.right=d(c.right)?c.right:1;this.bottom=d(c.bottom)?c.bottom:-1;this.top=d(c.top)?c.top:
1;this.clearColor=c.clearColor?c.clearColor:[1,1,1,1];this.clearFlagColor=c.clearFlagColor?c.clearFlagColor:!0;this.clearFlagDepth=c.clearFlagDepth?c.clearFlagDepth:!0;this.setupClearFlags(c.clearColor,c.clearDepth)};e.Camera.prototype.setupClearFlags=function(c,e){this.clearColor=c;this.clearDepth=e;delete this._currentClearFlags};e.ComponentChangedListener={isComponentListener:function(c){return c&&typeof c.componentsAdded==="function"&&typeof c.componentsRemoved==="function"}};e.MeshRenderer=function(){var c;
this.activated=function(){c=this.gameObject.transform};this.material=void 0;this.render=function(e,a,b,d){var f=this.mesh,g=this.material;f.bind(g.shader);g.bind(e,a,b,c,d);f.render()};this.mesh=void 0};e.Light=function(c){var e=g.create([1,1,1]),a,b,d=g.create(),f=function(){g.set([e[0]*b,e[1]*b,e[2]*b],d)},h,j,c=c||{};c.color&&g.set(c.color,e);b=c.intensity||1;f();c.type&&c.type!==3&&c.type!==2&&c.type!==1&&KICK.core.Util.fail("Light type must be 3, 2 or 1");a=c.type||3;Object.defineProperties(this,
{color:{get:function(){return g.create(e)},set:function(a){g.set(a,e);f()}},type:{get:function(){return a}},intensity:{get:function(){return b},set:function(a){b=a;f()}},colorIntensity:{value:d},gameObject:{get:function(){return h},set:function(a){h=a}},scriptPriority:{get:function(){return j},set:function(a){j=a}}})};Object.freeze(e.Light);e.SceneLights=function(){var c=null,e=null,a=g.create(),b=g.create(),d=null;Object.defineProperties(this,{ambientLight:{get:function(){return c},set:function(a){if(a&&
c)throw Error("Cannot have multiple ambient lights in the scene");c=a}},directionalLight:{get:function(){return e},set:function(a){if(a&&e)throw Error("Cannot have multiple directional lights in the scene");e=a;d=a!==null?e.gameObject.transform:null}},directionalHalfVector:{value:a},directionalLightDirection:{value:b},otherLights:{value:[]}});this.recomputeDirectionalLight=function(c){e!==null&&(g.set([0,0,1],b),l.multiplyVec3(d.rotation,b),f.multiplyVec3(c,b),g.set([0,0,-1],a),f.multiplyVec3(c,a),
g.add(a,b,a),g.lengthSqr(a)<0.0010?g.set([0,0,1],a):g.normalize(a))}}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,g;e[0]==="KICK"&&(e=e.slice(1));for(g=0;g<e.length;g+=1)typeof h[e[g]]==="undefined"&&(h[e[g]]={}),h=h[e[g]];return h};
(function(){var e=KICK.namespace("KICK.mesh");KICK.namespace("KICK.scene");KICK.namespace("KICK.core");KICK.namespace("KICK.math");var h=KICK.namespace("KICK.math.vec3");KICK.namespace("KICK.math.quat4");var g=KICK.namespace("KICK.math.vec4"),l=KICK.namespace("KICK.math.mat4");e.Mesh=function(g,f){var c=g.gl,q,a,b,d=[],k=[],s,j=this,i=function(){var a=[],b=[],c=0,d,e,f=j.vertex.length,g=0,h={};d=function(d,e){j[d]&&(a.push(e),b.push(d),h[d]={pointer:c*4,size:e,normalized:!1,type:5126},c+=e)};d("vertex",
3);d("normal",3);d("uv1",2);d("uv2",2);d("tangent",4);d("color",4);d=new Float32Array(c*f);for(e=0;e<f;e++)for(var i=0;i<b.length;i++)for(var k=j[b[i]],l=a[i],o=0;o<l;o++)d[g++]=k[e*l+o];return{vertexAttrLength:c*4,description:h,data:d}};f||(f={name:"Mesh"});f.vertex.length>65535&&KICK.core.Util.fail("Mesh overflow");this.name=f.name?f.name:"Mesh";this.vertex=f.vertex?new Float32Array(f.vertex):null;this.normal=f.normal?new Float32Array(f.normal):null;this.uv1=f.uv1?new Float32Array(f.uv1):null;this.uv2=
f.uv2?new Float32Array(f.uv2):null;this.tangent=f.tangent?new Float32Array(f.tangent):null;this.color=f.color?new Float32Array(f.color):null;this.indices=f.indices?new Uint16Array(f.indices):null;this.meshType=f.meshType?f.meshType:4;this.verify=function(a){var b=[],c,e;for(e in a.lookupAttribute)if(typeof e==="string"){c=!1;for(var f=0;f<d.length;f++)if(d[f]===e){c=!0;break}c||b.push(e)}return b.length===0?null:b};this.bind=function(d){d.bind();c.bindBuffer(34962,q);for(var e in a)if(typeof d.lookupAttribute[e]!==
"undefined"){var f=a[e],g=d.lookupAttribute[e];c.enableVertexAttribArray(g);c.vertexAttribPointer(g,f.size,f.type,!1,s,f.pointer)}c.bindBuffer(34963,b)};this.render=function(){c.drawElements(this.meshType,b.numItems,5123,0)};this.combine=function(a,b){if(this.meshType!==a.meshType||this.meshType==6)return this.meshType!==a.meshType?KICK.core.Util.fail("Mesh.combine does not support different meshTypes"):KICK.core.Util.fail("Mesh.combine does not support triangle fans"),null;for(var c="vertex,normal,uv1,uv2,tangent,color,indices".split(","),
d=c.length-1;d>=0;d--){var f=c[d];(!this[f]||!a[f])&&c.splice(d,1)}d=function(a,b,d,e){for(var f=c.length-1;f>=0;f--){var g=c[f];if(a[g]){var i=b[g];if(d&&g==="vertex")for(var i=new Float32Array(i),j=h.wrapArray(i),k=j.length-1;k>=0;k--)l.multiplyVec3(d,j[k]);if(e&&g==="indices"){i=new Uint16Array(i);j=i.length;for(k=0;k<j;k++)i[k]+=e}for(k=0;k<i.length;k++)a[g].push(i[k])}else a[g]=KICK.core.Util.typedArrayToArray(b[g])}};f={meshType:this.meshType,name:this.name+"-"+a.name};d(f,this,null,0);d(f,
a,b,this.indices.length);this.meshType===5&&f.indices.splice(this.indices,0,this.indices,this.indices+1);return new e.Mesh(g,f)};this.updateData=function(){var e="vertex,normal,tangent,uv1,uv2,color".split(","),f=[3,3,3,2,2,4],g,h,j,l=i();a=l.description;s=l.vertexAttrLength;for(g=k.length-1;g>=0;g--)c.deleteBuffer(k[g]);typeof b==="number"&&c.deleteBuffer(b);typeof q==="number"&&c.deleteBuffer(q);d=[];k=[];for(g=e.length-1;g>=0;g--){var o=e[g],p=this[o];if(p)h=c.createBuffer(),j=f[g],c.bindBuffer(34962,
h),c.bufferData(34962,p,35044),h.itemSize=j,h.numItems=p.length/j,k.push(h),d.push(o)}q=c.createBuffer();c.bindBuffer(34962,q);c.bufferData(34962,l.data,35044);b=c.createBuffer();c.bindBuffer(34963,b);c.bufferData(34963,this.indices,35044);b.itemSize=1;b.numItems=this.indices.length};this.updateData()};e.Mesh.prototype.recalculateNormals=function(){var e=this.vertex.length/3,f=this.indices.length/3,c=this.indices,g=h.wrapArray(this.vertex),a,b={},d=h.array(e,b),k=h.create(),l=h.create(),j=h.create();
for(a=0;a<f;a++){var i=c[a*3+0],t=c[a*3+1],m=c[a*3+2],w=g[i],r=g[m];h.subtract(g[t],w,k);h.subtract(r,w,l);h.cross(k,l,j);h.normalize(j);h.add(d[i],j);h.add(d[t],j);h.add(d[m],j)}for(a=0;a<e;a++)h.normalize(d[a]);this.normal=b.mem};e.Mesh.prototype.recalculateTangents=function(){var e=h.wrapArray(this.vertex),f=e.length,c=h.wrapArray(this.normal),l=this.uv1,a=this.indices,b=a.length/3,d=this.tangent,k=h.array(f),s=h.array(f),j,i=h.create(),t=h.create();for(j=0;j<b;j++){var m=a[j*3+0],w=a[j*3+1],r=
a[j*3+2],n=e[m],u=e[w],x=e[r],p=l[m],J=l[w],D=l[r],v=u[0]-n[0],y=x[0]-n[0],B=u[1]-n[1],z=x[1]-n[1],u=u[2]-n[2],n=x[2]-n[2],x=J[0]-p[0],A=D[0]-p[0],J=J[1]-p[1],D=D[1]-p[1],p=1/(x*D-A*J),D=h.create([(D*v-J*y)*p,(D*B-J*z)*p,(D*u-J*n)*p]),v=h.create([(x*y-A*v)*p,(x*z-A*B)*p,(x*n-A*u)*p]);h.add(k[m],D);h.add(k[w],D);h.add(k[r],D);h.add(s[m],v);h.add(s[w],v);h.add(s[r],v)}if(!d)this.tangent=d=new Float32Array(f*4);d=g.wrapArray(d);for(j=0;j<f;j++)e=c[j],l=k[j],h.subtract(l,e,i),h.dot(e,l,t),h.set(h.normalize(h.multiply(i,
t)),d[j]),d[j][3]=h.dot(h.cross(e,l,h.create()),s[j])<0?-1:1}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,g;e[0]==="KICK"&&(e=e.slice(1));for(g=0;g<e.length;g+=1)typeof h[e[g]]==="undefined"&&(h[e[g]]={}),h=h[e[g]];return h};
(function(){var e=KICK.namespace("KICK.renderer"),h=KICK.namespace("KICK.core"),g=KICK.namespace("KICK.scene"),l=KICK.namespace("KICK.math").mat4;e.NullRenderer=function(){};e.NullRenderer.prototype.render=function(){};e.NullRenderer.prototype.init=function(){};e.NullRenderer.prototype.addRenderableComponent=function(){};e.NullRenderer.prototype.removeRenderableComponent=function(){};e.ForwardRenderer=function(){var e=[],f=[],c=l.create(),q=l.create(),a=l.create(),b,d=[],k=new KICK.scene.SceneLights;
this.init=function(a){b=a.gl};this.render=function(){var d,g;for(d=f.length-1;d>=0;d--){g=f[d];g.setupCamera(c,q,a);k.recomputeDirectionalLight(q);for(g=e.length-1;g>=0;g--)e[g].render(c,q,a,k)}b.flush()};this.componentsAdded=function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];c instanceof g.Camera&&f.push(c);if(c instanceof g.Light){var h=c;d.push(h);h.type==1?k.ambientLight=h:h.type===2?k.directionalLight=h:k.otherLights.push(h)}typeof c.render==="function"&&e.push(c)}};this.componentsRemoved=
function(a){for(var b=a.length-1;b>=0;b--){var c=a[b];c instanceof g.Camera&&h.Util.removeElementFromArray(f,c);if(c instanceof g.Light){var l=c;h.Util.removeElementFromArray(d,l);l.type==1?k.ambientLight=null:l.type===2?k.directionalLight=null:h.Util.removeElementFromArray(k.otherLights,l)}typeof c.render==="function"&&h.Util.removeElementFromArray(e,c)}}}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,g;e[0]==="KICK"&&(e=e.slice(1));for(g=0;g<e.length;g+=1)typeof h[e[g]]==="undefined"&&(h[e[g]]={}),h=h[e[g]];return h};
(function(){var e=KICK.namespace("KICK.material"),h=KICK.namespace("KICK.math").mat4,g=KICK.namespace("KICK.core");e.Shader=function(g,h,f){var c=g.gl,q=this,h=h||{},a=g.createUID(),b=-1,d=h.faceCulling||1029,k=h.zTest||513,s=h.blend||!1,j=h.blendSFactor||770,i=h.blendDFactor||771,t,m=e.GLSLConstants,w=h.vertexShaderSrc||m["default_vs.glsl"],r=h.fragmentShaderSrc||m["default_fs.glsl"],n=h.errorLog,u=function(){t=(j+i*1E4)*(s?-1:1)},x=function(a,b){var d,a=e.Shader.getPrecompiledSource(a);d=b?c.createShader(35632):
c.createShader(35633);c.shaderSource(d,a);c.compileShader(d);return!c.getShaderParameter(d,35713)?(d=c.getShaderInfoLog(d),typeof n==="function"&&n(d),null):d};Object.defineProperties(this,{uid:{value:a},gl:{value:c},vertexShaderSrc:{get:function(){return w},set:function(a){typeof a!=="string"&&KICK.core.Util.fail("Shader.vertexShaderSrc must be a string");w=a}},fragmentShaderSrc:{get:function(){return r},set:function(a){typeof a!=="string"&&KICK.core.Util.fail("Shader.fragmentShaderSrc must be a string");
r=a}},errorLog:{get:function(){return n},set:function(a){a&&typeof a!=="function"&&KICK.core.Util.fail("Shader.errorLog should be a function (or null)");n=a}},engine:{value:g},shaderProgramId:{get:function(){return b}},faceCulling:{get:function(){return d},set:function(a){a!==1028&&a!==1032&&a!==1029&&a!==0&&KICK.core.Util.fail("Shader.faceCulling must be KICK.material.Shader.FRONT, KICK.material.Shader.BACK (default), KICK.material.Shader.NONE");d=a}},zTest:{get:function(){return k},set:function(a){a!==
512&&a!==513&&a!==514&&a!==515&&a!==516&&a!==517&&a!==518&&a!==519&&KICK.core.Util.fail("Shader.zTest must be 512, 513,514,515,516,517,518, or 519");k=a}},blend:{get:function(){return s},set:function(a){typeof a!=="boolean"&&KICK.core.Util.fail("Shader.blend must be a boolean");s=a;u()}},blendSFactor:{get:function(){return j},set:function(a){a!==32771&&a!==32772&&a!==776&&KICK.core.Util.fail("Shader.blendSFactor must be a one of 0, 1, 768, 769, 774, 775, 770, 771, 772, 773, 32769, 32770, 32771, 32772, and 776.");
j=a;u()}},blendDFactor:{get:function(){return i},set:function(a){a!==32771&&a!==32772&&KICK.core.Util.fail("Shader.blendSFactor must be a one of 0, 1, 768, 769, 774, 775, 770, 771, 772, 773, 32769, 32770, 32771, and 32772.");i=a;u()}}});this.updateShader=function(){var a=n||console.log,d=x(w,!1,a),e=x(r,!0,a),f=e===null||d===null;f&&(d=x(m["default_vs.glsl"],!1,a),e=x(m["default_fs.glsl"],!0,a));b=c.createProgram();c.attachShader(b,d);c.attachShader(b,e);c.linkProgram(b);if(!c.getProgramParameter(b,
35714))return a("Could not initialise shaders"),!1;c.useProgram(b);d=c.getProgramParameter(b,35718);this.activeUniforms=Array(d);this.lookupUniform={};for(a=0;a<d;a++)e=c.getActiveUniform(b,a),this.activeUniforms[a]={size:e.size,type:e.type,name:e.name,location:c.getUniformLocation(b,e.name)},this.lookupUniform[e.name]=this.activeUniforms[a];d=c.getProgramParameter(b,35721);this.activeAttributes=Array(d);this.lookupAttribute={};for(a=0;a<d;a++)e=c.getActiveAttrib(b,a),this.activeAttributes[a]={size:e.size,
type:e.type,name:e.name},this.lookupAttribute[e.name]=a;return!f};this.destroy=function(){b!==-1&&(c.deleteProgram(b),b=-1)};this.isValid=function(){return b!==-1};this.bind=function(){this.isValid||KICK.core.Util.fail("Cannot bind a shader that is not valid");c.useProgram(b);var a=q.faceCulling,d=c.faceCulling;if(d!==a)a===0?c.disable(2884):((!d||d===0)&&c.enable(2884),c.cullFace(a)),c.faceCulling=a;a=q.zTest;if(c.zTest!=a)c.depthFunc(a),c.zTest=a;c.blendKey!==t&&(s?c.enable(3042):c.disable(3042),
c.blendFunc(j,i))};this.toJSON=function(){return{faceCulling:d,zTest:k,vertexShaderSrc:w,fragmentShaderSrc:r}};f&&h.uid&&(f[h.uid]=a);u();q.updateShader()};e.Shader.getPrecompiledSource=function(g){for(var h in e.GLSLConstants)if(typeof h==="string")var f=e.GLSLConstants[h],g=g.replace('#pragma include "'+h+'"',f),g=g.replace("#pragma include '"+h+"'",f);return g};Object.freeze(e.Shader);e.Shader.prototype.bindUniform=function(e,g,f,c,q,a){var b=this.gl,d=e.uniforms,k,s,j,i,t=this.lookupUniform._mv,
m=this.lookupUniform._proj,w=this.lookupUniform._mvProj,r=this.lookupUniform._norm,e=this.lookupUniform._time,n=a.ambientLight,u=a.directionalLight,x=a.otherLights,p,J=0;for(k in d)if(s=this.lookupUniform[k])switch(j=d[k],i=s.location,j=j.value,s.type){case 5126:b.uniform1fv(i,j);break;case 35674:b.uniformMatrix2fv(i,!1,j);break;case 35675:b.uniformMatrix3fv(i,!1,j);break;case 35676:b.uniformMatrix4fv(i,!1,j);break;case 35664:b.uniform2fv(i,j);break;case 35665:b.uniform3fv(i,j);break;case 35666:b.uniform4fv(i,
j);break;case 5124:b.uniform1iv(i,j);break;case 35667:b.uniform2iv(i,j);break;case 35668:b.uniform3iv(i,j);break;case 35669:b.uniform4iv(i,j);break;case 35680:KICK.core.Util.fail("Not implemented");break;case 35678:j.bind(J);b.uniform1i(i,J);J++;break;default:console.log("Warn cannot find type "+s.type)}m&&b.uniformMatrix4fv(m.location,!1,g);if(t||r)p=q.getGlobalMatrix(),g=h.multiply(f,p,h.create()),t&&b.uniformMatrix4fv(t.location,!1,g),r&&(g=h.toNormalMat3(g),b.uniformMatrix3fv(r.location,!1,g));
w&&(p=p||q.getGlobalMatrix(),b.uniformMatrix4fv(w.location,!1,h.multiply(c,p,h.create())));if(n!==null)(c=this.lookupUniform._ambient)&&b.uniform3fv(c.location,n.colorIntensity);if(u!==null&&(c=this.lookupUniform["_dLight.colInt"]))b.uniform3fv(c.location,u.colorIntensity),c=this.lookupUniform["_dLight.lDir"],b.uniform3fv(c.location,a.directionalLightDirection),c=this.lookupUniform["_dLight.halfV"],b.uniform3fv(c.location,a.directionalHalfVector);for(a=x.length-1;a>=0;a--);if(e)a=this.engine.time,
b.uniform1f(e.location,a.time)};e.Material=function(h){var h=h||{},o=h.name||"Material",f=h.shader,c=h.uniforms||{},q=this;Object.defineProperties(this,{name:{value:o,writable:!0},shader:{value:f,writable:!0},uniforms:{value:c,writeable:!0}});this.bind=function(a,b,c,e,g){f.bindUniform(q,a,b,c,e,g)};this.toJSON=function(){var a={},b;for(b in c)if(typeof b==="string"){var d=c[b],e=d.value;e instanceof Float32Array||e instanceof Int32Array?e=g.Util.typedArrayToArray(e):(!e instanceof KICK.texture.Texture&&
KICK.core.Util.fail("Unknown uniform value type. Expected Texture"),e=e.uid);a[b]={type:d.type,value:e}}return{name:o,shader:f?f.uid:0,uniforms:a}};e.Material.verifyUniforms(c)};e.Material.verifyUniforms=function(e){var g,f;for(g in e)if(Array.isArray(e[g].value)||typeof e[g].value==="number")f=e[g].type,f===5124||f===35667||f===35668||f===35669?e[g].value=new Int32Array(e[g].value):f===35678||f===35680?typeof e[g].value!==KICK.texture.Texture&&KICK.core.Util.fail("Uniform value should be a texture object but was "+
e[g].value):e[g].value=new Float32Array(e[g].value)}})();KICK=KICK||{};KICK.namespace=KICK.namespace||function(e){var e=e.split("."),h=KICK,g;e[0]==="KICK"&&(e=e.slice(1));for(g=0;g<e.length;g+=1)typeof h[e[g]]==="undefined"&&(h[e[g]]={}),h=h[e[g]];return h};
(function(){var e=KICK.namespace("KICK.scene"),h=KICK.namespace("KICK.mesh"),g=KICK.namespace("KICK.math"),l=g.vec3,o=g.vec2;e.MeshFactory={};e.MeshFactory.createTriangle=function(e){return new h.Mesh(e,{name:"Triangle",vertex:[0,1,0,-0.866025403784439,-0.5,0,0.866025403784439,-0.5,0],uv1:[0,1,-0.866025403784439,-0.5,0.866025403784439,-0.5],normal:[0,0,1,0,0,1,0,0,1],indices:[0,1,2]})};e.MeshFactory.createPlane=function(e){return new h.Mesh(e,{name:"Plane",vertex:[1,-1,0,1,1,0,-1,-1,0,-1,1,0],uv1:[1,
0,1,1,0,0,0,1],normal:[0,0,1,0,0,1,0,0,1,0,0,1],indices:[0,1,2,2,1,3]})};e.MeshFactory.createUVSphere=function(e,c,g,a){if(!c||c<3)c=20;if(!g||g<2)g=10;a||(a=1);for(var b=g*(c+1)*2+2*(g-1),d={},k=l.array(b,d),s={},j=l.array(b,s),i={},b=o.array(b,i),t=[],m=Math.PI/g,w=Math.PI/2,r=Math.PI*2,n=0,u=0;u<g;u++)for(var x=m*u-w,p=m*(u+1)-w,J=Math.sin(x),x=Math.cos(x),D=Math.sin(p),p=Math.cos(p),v=0;v<=c;v++){var y=r/c*v,B=Math.sin(y),z=Math.cos(y),y=z*x,A=J,E=B*x;z*=p;var F=D;B*=p;l.set([y,A,E],k[n]);o.set([1-
v/c,u/g],b[n]);l.set([a*y,a*A,a*E],j[n]);t.push(n);u>0&&v==0&&t.push(n);n++;l.set([z,F,B],k[n]);o.set([1-v/c,(u+1)/g],b[n]);l.set([a*z,a*F,a*B],j[n]);t.push(n);v==c&&u<g-1&&t.push(n);n++}return new h.Mesh(e,{name:"UVSphere",vertex:s.mem,uv1:i.mem,normal:d.mem,indices:t,meshType:5})};e.MeshFactory.createCube=function(e,c){c||(c=1);return new h.Mesh(e,{name:"Cube",vertex:[c,c,c,-c,c,c,-c,-c,c,c,-c,c,c,c,c,c,-c,c,c,-c,-c,c,c,-c,c,c,c,c,c,-c,-c,c,-c,-c,c,c,-c,c,c,-c,c,-c,-c,-c,-c,-c,-c,c,-c,-c,-c,c,-c,
-c,c,-c,c,-c,-c,c,c,-c,-c,-c,-c,-c,-c,c,-c,c,c,-c],uv1:[1,1,0,1,0,0,1,0,0,1,0,0,1,0,1,1,1,0,1,1,0,1,0,0,1,1,0,1,0,0,1,0,1,1,0,1,0,0,1,0,0,0,1,0,1,1,0,1],normal:[0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1],color:[1,1,1,1,1,1,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1,0,1,1,0,0,1,1,0,1,1,1,1,1,1,1,0,1,1,1,0,1,0,1,1,1,0,1,1,1,0,1,0,1,0,1,0,0,0,1,1,0,0,1,0,0,0,1,0,0,1,1,1,0,1,1,1,0,0,1,0,0,1,1,0,0,0,1,
0,1,0,1,0,1,1,1],indices:[0,1,2,0,2,3,4,5,6,4,6,7,8,9,10,8,10,11,12,13,14,12,14,15,16,17,18,16,18,19,20,21,22,20,22,23]})}})();
