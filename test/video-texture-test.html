<html>
<head>
    <script type="text/javascript" src="/example/js/kick-uncompressed-0.1.0.js"></script>
    <script type="text/javascript">
    var engine;
    var camera;
    function initKick(videoElement) {
        engine = new KICK.core.Engine('glcanvas',{});
        var activeScene = engine.activeScene;
        var cameraObject = activeScene.createGameObject();
        var camera = new KICK.scene.Camera({
            clearColor: [124/255,163/255,137/255,1],
            perspective: false,
            near: -1,
            far:1
        });
        cameraObject.addComponent(camera);

        var gameObject = activeScene.createGameObject();
        var meshRenderer = new KICK.scene.MeshRenderer();

        var texture = new KICK.texture.MovieTexture(engine,{
            videoElement:videoElement
        });
        texture.setTemporaryTexture();
        meshRenderer.mesh = engine.resourceManager.getMesh("kickjs://mesh/plane/");
         // create material
        meshRenderer.material = new KICK.material.Material(engine,{
            shader: engine.resourceManager.getShader("kickjs://shader/unlit/"),
            uniforms:{
                mainColor: {
                    value: [1,0,1], // change the color slightly (to give a very simple effect)
                    type: KICK.core.Constants.GL_FLOAT_VEC3
                },
                mainTexture: {
                    value: texture,
                    type: KICK.core.Constants.GL_SAMPLER_2D
                }
            }
        });
        gameObject.addComponent(meshRenderer);
    }

        var canvas;
        var videoElement;
        function start(){
            canvas = document.getElementById("glcanvas");
            videoElement = document.getElementById("video");
            videoElement.muted = true;
            videoElement.play();
            initKick(videoElement);
        }

    </script>
</head>
<body onload="start()">
<h1>Video texture test</h1>
This is a remake of the following demo in KickJS:<br>
<a href="https://developer.mozilla.org/en/WebGL/Animating_textures_in_WebGL">https://developer.mozilla.org/en/WebGL/Animating_textures_in_WebGL</a><br>
Note due to the size of the video Firefox.ogv it is not added to the versioning system. To run this test you need to download the video from (<a href="https://developer.mozilla.org/samples/webgl/sample8/Firefox.ogv">Link</a>)<br>
Another note. This test only works from a webserver.
<canvas id="glcanvas" width="640" height="480">
      Your browser doesn't appear to support the HTML5 <code>&lt;canvas&gt;</code> element.
    </canvas>
    <video id="video" src="Firefox.ogv" autoplay>
      Your browser doesn't appear to support the HTML5 <code>&lt;video&gt;</code> element.
    </video>
</body>
</html>